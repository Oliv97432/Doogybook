import{u as b,s as f,j as e}from"./index-DErj2e1l.js";import{e as j,d as N,r as o}from"./vendor-react-DEK6ZklB.js";import{e as v,n as y,g as z,H as l,I as w,b as _,a4 as C,j as k,N as D,M as P}from"./vendor-ui-DyJst9CI.js";import"./vendor-supabase-DfwcnzK-.js";const E=()=>{var d;const{dogId:a}=j(),n=N(),{user:i}=b(),[s,c]=o.useState(null),[m,x]=o.useState(!0);o.useEffect(()=>{u()},[a]);const u=async()=>{try{const{data:r,error:t}=await f.from("dogs").select(`
          *,
          professional_accounts!dogs_professional_account_id_fkey(
            id,
            organization_name,
            phone,
            email,
            address,
            city,
            postal_code
          )
        `).eq("id",a).eq("adoption_status","available").eq("is_published",!0).single();if(t)throw t;c({...r,organization:r.professional_accounts})}catch(r){console.error("Erreur chargement chien:",r)}finally{x(!1)}},p=r=>{if(!r)return null;const t=new Date().getFullYear()-new Date(r).getFullYear(),h=new Date().getMonth()-new Date(r).getMonth();return t===0?`${h} mois`:`${t} an${t>1?"s":""}`},g=()=>{i?n(`/adoption-application/${a}`):n("/register",{state:{returnTo:`/adoption/${a}`,message:`CrÃ©ez un compte pour adopter ${s==null?void 0:s.name} ðŸ•`}})};return m?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-16 w-16 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-card border-b border-border shadow-soft sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("button",{onClick:()=>n("/adoption"),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(y,{size:20}),e.jsx("span",{children:"Retour aux chiens"})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative aspect-square rounded-3xl overflow-hidden bg-gradient-to-br from-primary/10 to-primary/5 shadow-lg",children:[s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-9xl font-bold text-primary/30",children:(d=s.name)==null?void 0:d.charAt(0).toUpperCase()})}),s.is_urgent&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"px-4 py-2 bg-red-500 text-white text-sm font-bold rounded-full shadow-lg animate-pulse",children:"URGENT - Ã€ adopter rapidement"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-4 py-2 bg-green-500 text-white text-sm font-bold rounded-full shadow-lg backdrop-blur-sm",children:"âœ“ Disponible"})})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-heading font-bold text-foreground mb-2",children:s.name}),e.jsx("p",{className:"text-xl text-muted-foreground",children:s.breed})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Sexe"}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:s.gender==="male"?"â™‚ï¸ MÃ¢le":"â™€ï¸ Femelle"})]}),s.birth_date&&e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Ã‚ge"}),e.jsxs("p",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[e.jsx(z,{size:18}),p(s.birth_date)]})]}),s.size&&e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Taille"}),e.jsx("p",{className:"text-lg font-semibold text-foreground capitalize",children:s.size})]}),s.weight&&e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Poids"}),e.jsxs("p",{className:"text-lg font-semibold text-foreground",children:[s.weight," kg"]})]})]}),s.character&&e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border mb-6",children:[e.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(l,{size:18}),"CaractÃ¨re"]}),e.jsx("p",{className:"text-muted-foreground",children:s.character})]}),s.description&&e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border mb-6",children:[e.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(w,{size:18}),"Description"]}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-line",children:s.description})]}),e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border mb-6",children:[e.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(_,{size:18}),"SantÃ©"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.is_sterilized?e.jsx("span",{className:"text-green-500",children:"âœ“"}):e.jsx("span",{className:"text-red-500",children:"âœ—"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"StÃ©rilisÃ©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.is_vaccinated?e.jsx("span",{className:"text-green-500",children:"âœ“"}):e.jsx("span",{className:"text-red-500",children:"âœ—"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"VaccinÃ©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.is_microchipped?e.jsx("span",{className:"text-green-500",children:"âœ“"}):e.jsx("span",{className:"text-red-500",children:"âœ—"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"PucÃ©"})]})]})]}),s.adoption_fee&&e.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-6 border border-primary/20 mb-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Participation aux frais vÃ©tÃ©rinaires"}),e.jsxs("p",{className:"text-3xl font-bold text-primary mb-2",children:[s.adoption_fee,"â‚¬"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Couvre les frais de stÃ©rilisation, vaccination et identification"})]}),s.organization&&e.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border mb-6",children:[e.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(C,{size:18}),"Refuge"]}),e.jsx("p",{className:"font-medium text-foreground mb-2",children:s.organization.organization_name}),s.organization.city&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2 mb-2",children:[e.jsx(k,{size:14}),s.organization.city,s.organization.postal_code&&` (${s.organization.postal_code})`]}),s.organization.phone&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2 mb-2",children:[e.jsx(D,{size:14}),s.organization.phone]}),s.organization.email&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(P,{size:14}),s.organization.email]})]}),e.jsxs("button",{onClick:g,className:"w-full px-8 py-4 bg-primary text-primary-foreground rounded-xl font-bold text-lg hover:bg-primary/90 transition-smooth flex items-center justify-center gap-3 shadow-lg",children:[e.jsx(l,{size:24}),e.jsxs("span",{children:["Je veux adopter ",s.name]})]}),!i&&e.jsx("p",{className:"text-center text-sm text-muted-foreground mt-3",children:"Vous serez redirigÃ© vers la crÃ©ation de compte"})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{size:64,className:"text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Chien non trouvÃ©"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Ce chien n'est plus disponible Ã  l'adoption"}),e.jsx("button",{onClick:()=>n("/adoption"),className:"px-6 py-3 bg-primary text-primary-foreground rounded-xl font-medium hover:bg-primary/90 transition-smooth",children:"Retour aux chiens disponibles"})]})})};export{E as default};
