import{u as M,j as e}from"./index-DErj2e1l.js";import{d as q,u as E,r as l}from"./vendor-react-DEK6ZklB.js";import{n as T,an as U,ae as F,a as H,D as V,d as B,ap as J,r as O,e as W}from"./vendor-ui-DyJst9CI.js";import"./vendor-supabase-DfwcnzK-.js";const ee=()=>{const{user:_}=M(),z=q(),x=E(),b=l.useRef(null),f=l.useRef(null),[t,j]=l.useState({dogName:"",breed:"",age:"",story:"",personality:"",needs:"",health:"",location:"La R√©union"}),[K,y]=l.useState(null),[m,u]=l.useState(null),[i,k]=l.useState(""),[c,R]=l.useState(null),[N,v]=l.useState(!1),[w,h]=l.useState(!1);l.useEffect(()=>{var s;if((s=x.state)!=null&&s.dogData){const{name:a,breed:n,age:r,gender:C,description:g,photo:d}=x.state.dogData;j(p=>({...p,dogName:a||"",breed:n||"",age:(r==null?void 0:r.toString())||"",story:g||""})),d&&u(d)}},[x.state]);const I=["Paris","Lyon","Marseille","Toulouse","Nice","Nantes","Bordeaux","La R√©union","Martinique","Guadeloupe"],o=s=>{const{name:a,value:n}=s.target;j(r=>({...r,[a]:n}))},A=s=>{const a=s.target.files[0];if(a&&a.type.startsWith("image/")){y(a);const n=new FileReader;n.onload=r=>u(r.target.result),n.readAsDataURL(a)}},S=()=>{const s=["#AdopteDontShop","#AdoptionChien","#DogAdoption","#Doogybook","#SauverUneVie","#ChienARescuer"],a={Paris:["#ChienParis","#AdoptionParis","#ParisDog"],Lyon:["#ChienLyon","#AdoptionLyon","#LyonDog"],Marseille:["#ChienMarseille","#AdoptionMarseille","#MarseilleDog"],"La R√©union":["#ChienReunion","#AdoptionReunion","#ReunionDog","#974"],Martinique:["#ChienMartinique","#AdoptionMartinique","#972"],Guadeloupe:["#ChienGuadeloupe","#AdoptionGuadeloupe","#971"]},n=t.breed?`#${t.breed.replace(/\s+/g,"")}`:"",r=a[t.location]||[];return[...s,...r,n].filter(Boolean).join(" ")},L=()=>{const s="üêï",a="‚ù§Ô∏è",n="üè†";let r=`${s} ${t.dogName} cherche une famille !

`;return t.story&&(r+=`üìñ Son histoire :
${t.story}

`),t.personality&&(r+=`‚ú® Sa personnalit√© :
${t.personality}

`),t.needs&&(r+=`${n} Ce qu'il recherche :
${t.needs}

`),r+=`üìç ${t.location}
`,r+=`üéÇ ${t.age||"√Çge non pr√©cis√©"}

`,r+=`Pour adopter ${t.dogName}, rendez-vous sur doogybook.com ${a}

`,r+=S(),r},D=async()=>{if(!m){alert("Veuillez d'abord uploader une photo");return}h(!0);try{const s=f.current,a=s.getContext("2d");s.width=1080,s.height=1080;const n=new Image;n.onload=()=>{const r=Math.max(s.width/n.width,s.height/n.height),C=s.width/2-n.width/2*r,g=s.height/2-n.height/2*r;a.drawImage(n,C,g,n.width*r,n.height*r);const d=a.createLinearGradient(0,s.height-200,0,s.height);d.addColorStop(0,"rgba(0, 0, 0, 0)"),d.addColorStop(1,"rgba(0, 0, 0, 0.8)"),a.fillStyle=d,a.fillRect(0,s.height-200,s.width,200),a.fillStyle="white",a.font="bold 80px Arial",a.textAlign="center",a.fillText(t.dogName,s.width/2,s.height-120),a.font="40px Arial",a.fillText(t.breed,s.width/2,s.height-70),a.font="30px Arial",a.fillText("doogybook.com",s.width/2,s.height-25);const p=s.toDataURL("image/jpeg",.95);R(p),h(!1)},n.src=m}catch(s){console.error("Erreur g√©n√©ration image:",s),alert("Erreur lors de la g√©n√©ration de l'image"),h(!1)}},P=()=>{if(!t.dogName||!t.breed){alert("Veuillez remplir au moins le nom et la race");return}const s=L();k(s),D()},G=()=>{navigator.clipboard.writeText(i),v(!0),setTimeout(()=>v(!1),2e3)},$=()=>{if(!c)return;const s=document.createElement("a");s.download=`${t.dogName}_instagram.jpg`,s.href=c,s.click()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>z("/pro/dashboard"),className:"flex items-center gap-1 sm:gap-2 text-gray-600 hover:text-gray-900 min-h-[44px] min-w-[44px]","aria-label":"Retour au tableau de bord",children:[e.jsx(T,{size:18,className:"sm:size-5"}),e.jsx("span",{className:"font-medium text-sm sm:text-base hidden xs:inline",children:"Retour"})]}),e.jsx("h1",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900 truncate px-2",children:"G√©n√©rateur Instagram"}),e.jsx("div",{className:"w-10 sm:w-20"})]})})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-3 sm:px-4 py-6 sm:py-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-pink-500 via-purple-500 to-blue-500 rounded-2xl sm:rounded-3xl p-5 sm:p-8 text-white mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx(U,{size:24,className:"sm:size-8"}),e.jsx("h2",{className:"text-xl sm:text-3xl font-heading font-bold",children:"Cr√©ez des posts Instagram optimis√©s"})]}),e.jsx("p",{className:"text-sm sm:text-lg text-white/90 leading-relaxed",children:"G√©n√©rez automatiquement une image professionnelle et une l√©gende optimis√©e avec hashtags localis√©s pour donner un maximum de visibilit√© √† vos chiens !"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-sm",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900 mb-4 sm:mb-6",children:"üì∏ Photo du chien"}),e.jsxs("div",{onClick:()=>{var s;return(s=b.current)==null?void 0:s.click()},className:"border-3 border-dashed border-blue-300 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-center bg-blue-50 hover:bg-blue-100 cursor-pointer transition-smooth mb-4 min-h-[180px] sm:min-h-[240px] flex flex-col items-center justify-center",children:[m?e.jsx("img",{src:m,alt:"Preview",className:"max-h-48 sm:max-h-64 mx-auto rounded-xl sm:rounded-2xl object-contain"}):e.jsxs("div",{className:"py-4 sm:py-8",children:[e.jsx(F,{size:32,className:"sm:size-12 text-blue-500 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium mb-2 text-sm sm:text-base",children:"Cliquez pour uploader une photo"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 px-4",children:"Format recommand√© : carr√© (1080x1080px)"})]}),e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:A,className:"hidden"})]}),m&&e.jsx("button",{onClick:()=>{y(null),u(null)},className:"w-full py-2 bg-red-50 text-red-600 rounded-xl font-medium hover:bg-red-100 text-sm sm:text-base",children:"Changer de photo"})]}),e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-sm",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900 mb-4 sm:mb-6",children:"üìù Informations"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du chien *"}),e.jsx("input",{type:"text",name:"dogName",value:t.dogName,onChange:o,placeholder:"Ex: Max",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Race *"}),e.jsx("input",{type:"text",name:"breed",value:t.breed,onChange:o,placeholder:"Ex: Labrador",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"√Çge"}),e.jsx("input",{type:"text",name:"age",value:t.age,onChange:o,placeholder:"Ex: 2 ans",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation"}),e.jsx("select",{name:"location",value:t.location,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base",children:I.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Son histoire"}),e.jsx("textarea",{name:"story",value:t.story,onChange:o,placeholder:"Racontez son parcours...",rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personnalit√©"}),e.jsx("textarea",{name:"personality",value:t.personality,onChange:o,placeholder:"Joueur, calme, affectueux...",rows:2,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ce qu'il recherche"}),e.jsx("textarea",{name:"needs",value:t.needs,onChange:o,placeholder:"Jardin, famille active, autre animal...",rows:2,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm sm:text-base"})]})]}),e.jsxs("button",{onClick:P,disabled:w||!t.dogName||!t.breed,className:"w-full mt-6 py-3 sm:py-4 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-xl font-bold hover:from-pink-600 hover:to-purple-700 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-h-[52px] text-sm sm:text-base",children:[e.jsx(H,{size:18,className:"sm:size-5"}),w?"G√©n√©ration...":"G√©n√©rer le post Instagram"]})]})]}),e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[c&&e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-sm",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900 mb-3 sm:mb-4",children:"üñºÔ∏è Image g√©n√©r√©e"}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c,alt:"Generated",className:"w-full rounded-xl sm:rounded-2xl mb-3 sm:mb-4"}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:"Instagram"})]}),e.jsxs("button",{onClick:$,className:"w-full py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 flex items-center justify-center gap-2 text-sm sm:text-base min-h-[44px]",children:[e.jsx(V,{size:18,className:"sm:size-5"}),"T√©l√©charger l'image"]})]}),i&&e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900",children:"üìù L√©gende Instagram"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{children:[i.length," caract√®res"]}),e.jsx("span",{className:"w-2 h-2 bg-gray-300 rounded-full"}),e.jsxs("span",{children:[i.split("#").length-1," hashtags"]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-3 sm:mb-4 max-h-64 sm:max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-xs sm:text-sm text-gray-700 leading-relaxed",children:i})}),e.jsxs("button",{onClick:G,className:"w-full py-3 bg-green-500 text-white rounded-xl font-medium hover:bg-green-600 flex items-center justify-center gap-2 text-sm sm:text-base min-h-[44px]",children:[N?e.jsx(B,{size:18,className:"sm:size-5"}):e.jsx(J,{size:18,className:"sm:size-5"}),N?"Copi√© !":"Copier la l√©gende"]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.jsx("strong",{children:"Astuce :"})," Copiez la l√©gende et collez-la directement dans Instagram avec l'image g√©n√©r√©e."]})})]}),!c&&!i&&e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-8 sm:p-12 shadow-sm text-center",children:[e.jsx(O,{size:40,className:"sm:size-12 text-gray-300 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:'Remplissez le formulaire et cliquez sur "G√©n√©rer" pour voir le r√©sultat'}),e.jsxs("div",{className:"mt-4 text-xs sm:text-sm text-gray-400",children:[e.jsx("p",{children:"üì± Optimis√© pour Instagram"}),e.jsx("p",{children:"üìç Hashtags localis√©s"}),e.jsx("p",{children:"üé® Image professionnelle"})]})]})]})]}),e.jsx("canvas",{ref:f,className:"hidden"}),e.jsxs("div",{className:"mt-6 sm:mt-8 bg-blue-50 rounded-xl p-4 sm:p-6 text-sm sm:text-base",children:[e.jsxs("h4",{className:"font-bold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(W,{size:18,className:"sm:size-5"}),"Astuces pour un bon post Instagram"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Utilisez une photo nette et bien √©clair√©e"}),e.jsx("li",{children:"Remplissez tous les champs pour une l√©gende compl√®te"}),e.jsx("li",{children:"Personnalisez la l√©gende si n√©cessaire"}),e.jsx("li",{children:"Postez aux heures de forte activit√© (12h-14h, 18h-22h)"})]})]})]})]})};export{ee as default};
