import{u as N,j as e,s as v}from"./index-D6tTS0JU.js";import{d as w,r as x}from"./vendor-react-DEK6ZklB.js";import{b as u,M as z,a2 as g,B as C,N as P,j as S,A as E}from"./vendor-ui-DSVO5Hq3.js";import"./vendor-supabase-DfwcnzK-.js";const M=()=>{const d=w(),{signUp:b}=N(),[s,h]=x.useState({email:"",password:"",confirmPassword:"",organizationName:"",organizationType:"refuge",phone:"",city:""}),[r,m]=x.useState({}),[a,p]=x.useState(!1),n=t=>{const{name:i,value:o}=t.target;h(l=>({...l,[i]:o})),r[i]&&m(l=>({...l,[i]:""}))},f=()=>{const t={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(t.email="Email invalide"):t.email="Email requis",s.password?s.password.length<8&&(t.password="Minimum 8 caract√®res"):t.password="Mot de passe requis",s.password!==s.confirmPassword&&(t.confirmPassword="Les mots de passe ne correspondent pas"),s.organizationName||(t.organizationName="Nom de l'organisation requis"),s.phone||(t.phone="T√©l√©phone requis"),s.city||(t.city="Ville requise"),t},y=async t=>{t.preventDefault();const i=f();if(Object.keys(i).length>0){m(i);return}p(!0),m({});try{console.log("üîµ Step 1: Creating user account...");const{data:o,error:l}=await b(s.email,s.password,{full_name:s.organizationName,phone:s.phone});if(l)throw console.error("üî¥ Auth error:",l),l;if(!(o!=null&&o.user))throw new Error("Erreur lors de la cr√©ation du compte");console.log("üü¢ Step 1 complete: User created:",o.user.id),console.log("üîµ Step 2: Creating professional account...");const{data:j,error:c}=await v.from("professional_accounts").insert({user_id:o.user.id,organization_name:s.organizationName,organization_type:s.organizationType,phone:s.phone,city:s.city,email:s.email,is_active:!0,is_verified:!1}).select().single();if(c)throw console.error("üî¥ Pro account error:",c),c;console.log("üü¢ Step 2 complete: Professional account created:",j.id),console.log("üéâ Registration complete! Redirecting to login..."),alert(`‚úÖ Compte professionnel cr√©√© avec succ√®s !

Connectez-vous pour acc√©der √† votre dashboard.`),d("/login")}catch(o){console.error("üî¥ Registration error:",o),m({general:o.message||"Erreur lors de la cr√©ation du compte. Veuillez r√©essayer."})}finally{p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-teal-50 to-blue-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 py-3 sm:py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl sm:text-3xl",children:"üêï"}),e.jsx("h1",{className:"text-xl sm:text-2xl font-heading font-bold text-gray-900 truncate",children:"Doogybook"})]}),e.jsx("button",{onClick:()=>d("/"),className:"px-3 sm:px-4 py-2 text-gray-600 hover:text-gray-900 text-sm sm:text-base min-h-[44px]","aria-label":"Retour √† l'accueil",children:"‚Üê Retour"})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-3 sm:px-4 py-6 sm:py-8 md:py-12",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-green-500 to-teal-600 rounded-2xl sm:rounded-3xl flex items-center justify-center mx-auto mb-4 sm:mb-6",children:e.jsx(u,{className:"size-7 sm:size-10 text-white"})}),e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-heading font-bold text-gray-900 mb-3 sm:mb-4 leading-tight",children:"Inscription Professionnelle"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-600 px-2",children:"Cr√©ez votre compte refuge/association et commencez √† publier vos chiens √† adopter"})]}),e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-xl p-4 sm:p-6 md:p-8 lg:p-12",children:[r.general&&e.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-xs sm:text-sm",children:r.general}),e.jsxs("form",{onSubmit:y,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email professionnel *"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:n,className:`w-full pl-10 sm:pl-12 pr-4 py-3 border ${r.email?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base`,placeholder:"contact@refuge.fr",disabled:a})]}),r.email&&e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe *"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:n,className:`w-full pl-10 sm:pl-12 pr-4 py-3 border ${r.password?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base`,placeholder:"Minimum 8 caract√®res",disabled:a})]}),r.password&&e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:r.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le mot de passe *"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),e.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:n,className:`w-full pl-10 sm:pl-12 pr-4 py-3 border ${r.confirmPassword?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base`,placeholder:"Confirmez votre mot de passe",disabled:a})]}),r.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:r.confirmPassword})]}),e.jsx("div",{className:"border-t border-gray-200 my-4 sm:my-8"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du refuge / association *"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),e.jsx("input",{type:"text",name:"organizationName",value:s.organizationName,onChange:n,className:`w-full pl-10 sm:pl-12 pr-4 py-3 border ${r.organizationName?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base`,placeholder:"Refuge les Amis des Animaux",disabled:a})]}),r.organizationName&&e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:r.organizationName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'organisation *"}),e.jsxs("select",{name:"organizationType",value:s.organizationType,onChange:n,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base",disabled:a,children:[e.jsx("option",{value:"refuge",children:"Refuge"}),e.jsx("option",{value:"spa",children:"SPA"}),e.jsx("option",{value:"association",children:"Association"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T√©l√©phone *"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:n,className:`w-full pl-10 sm:pl-12 pr-4 py-3 border ${r.phone?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base`,placeholder:"01 23 45 67 89",disabled:a})]}),r.phone&&e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:r.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville *"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:n,className:`w-full pl-10 sm:pl-12 pr-4 py-3 border ${r.city?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm sm:text-base`,placeholder:"Paris",disabled:a})]}),r.city&&e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:r.city})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 sm:p-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-blue-800 leading-relaxed",children:'‚ÑπÔ∏è Votre compte sera en attente de v√©rification. Une fois v√©rifi√© par notre √©quipe, vous recevrez un badge "V√©rifi√©" qui rassurera les adoptants.'})}),e.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 sm:py-4 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-xl font-bold text-base sm:text-lg hover:from-green-600 hover:to-teal-700 transition-smooth flex items-center justify-center gap-2 disabled:opacity-50 min-h-[52px]",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Cr√©ation en cours..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"size-5 sm:size-6"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Cr√©er mon compte professionnel"}),e.jsx(E,{className:"size-4 sm:size-5"})]})}),e.jsx("div",{className:"text-center pt-3 sm:pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Vous avez d√©j√† un compte ?"," ",e.jsx("button",{type:"button",onClick:()=>d("/login"),className:"text-green-600 font-medium hover:text-green-700",disabled:a,children:"Se connecter"})]})})]})]}),e.jsx("div",{className:"mt-6 sm:mt-8 text-center text-xs sm:text-sm text-gray-600",children:e.jsx("p",{children:"En cr√©ant un compte, vous acceptez nos conditions d'utilisation"})})]})]})};export{M as default};
