import{j as s}from"./index-B7Jx57M6.js";import{R as V,r as $}from"./vendor-react-DEK6ZklB.js";import{c as h,B as Y}from"./Button-DRPe_8g_.js";import{I as Z}from"./Input-B_atqvlr.js";import{X as _,s as q,t as T,h as C}from"./vendor-ui-BmzNxrw7.js";const O=V.forwardRef(({className:A,options:c=[],value:a,defaultValue:n,placeholder:N="Select an option",multiple:x=!1,disabled:v=!1,required:w=!1,label:y,description:S,error:b,searchable:g=!1,clearable:F=!1,loading:k=!1,id:H,name:P,onChange:d,onOpenChange:f,...W},X)=>{var i,D;const[j,I]=$.useState(!1),[t,z]=$.useState(""),L=H||`select-${(D=(i=Math.random())==null?void 0:i.toString(36))==null?void 0:D.substr(2,9)}`,u=g&&t?c==null?void 0:c.filter(e=>{var l,r,m,E,M;return((r=(l=e==null?void 0:e.label)==null?void 0:l.toLowerCase())==null?void 0:r.includes(t==null?void 0:t.toLowerCase()))||(e==null?void 0:e.value)&&((M=(E=(m=e==null?void 0:e.value)==null?void 0:m.toString())==null?void 0:E.toLowerCase())==null?void 0:M.includes(t==null?void 0:t.toLowerCase()))}):c,G=()=>{var l;if(!a)return N;if(x){const r=c==null?void 0:c.filter(m=>a==null?void 0:a.includes(m==null?void 0:m.value));return(r==null?void 0:r.length)===0?N:(r==null?void 0:r.length)===1?(l=r==null?void 0:r[0])==null?void 0:l.label:`${r==null?void 0:r.length} items selected`}const e=c==null?void 0:c.find(r=>(r==null?void 0:r.value)===a);return e?e==null?void 0:e.label:N},J=()=>{if(!v){const e=!j;I(e),f==null||f(e),e||z("")}},K=e=>{if(x){const l=a||[],r=l!=null&&l.includes(e==null?void 0:e.value)?l==null?void 0:l.filter(m=>m!==(e==null?void 0:e.value)):[...l,e==null?void 0:e.value];d==null||d(r)}else d==null||d(e==null?void 0:e.value),I(!1),f==null||f(!1)},Q=e=>{e==null||e.stopPropagation(),d==null||d(x?[]:"")},U=e=>{var l;z((l=e==null?void 0:e.target)==null?void 0:l.value)},R=e=>x?(a==null?void 0:a.includes(e))||!1:a===e,B=x?(a==null?void 0:a.length)>0:a!==void 0&&a!=="";return s.jsxs("div",{className:h("relative",A),children:[y&&s.jsxs("label",{htmlFor:L,className:h("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block",b?"text-destructive":"text-foreground"),children:[y,w&&s.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:X,id:L,type:"button",className:h("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",b&&"border-destructive focus:ring-destructive",!B&&"text-muted-foreground"),onClick:J,disabled:v,"aria-expanded":j,"aria-haspopup":"listbox",...W,children:[s.jsx("span",{className:"truncate",children:G()}),s.jsxs("div",{className:"flex items-center gap-1",children:[k&&s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),F&&B&&!k&&s.jsx(Y,{variant:"ghost",size:"icon",className:"h-4 w-4",onClick:Q,children:s.jsx(_,{className:"h-3 w-3"})}),s.jsx(q,{className:h("h-4 w-4 transition-transform",j&&"rotate-180")})]})]}),s.jsxs("select",{name:P,value:a||"",onChange:()=>{},className:"sr-only",tabIndex:-1,multiple:x,required:w,children:[s.jsx("option",{value:"",children:"Select..."}),c==null?void 0:c.map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.value))]}),j&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md",children:[g&&s.jsx("div",{className:"p-2 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(T,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Z,{placeholder:"Search options...",value:t,onChange:U,className:"pl-8"})]})}),s.jsx("div",{className:"py-1 max-h-60 overflow-auto",children:(u==null?void 0:u.length)===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:t?"No options found":"No options available"}):u==null?void 0:u.map(e=>s.jsxs("div",{className:h("relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",R(e==null?void 0:e.value)&&"bg-primary text-primary-foreground",(e==null?void 0:e.disabled)&&"pointer-events-none opacity-50"),onClick:()=>!(e!=null&&e.disabled)&&K(e),children:[s.jsx("span",{className:"flex-1",children:e==null?void 0:e.label}),x&&R(e==null?void 0:e.value)&&s.jsx(C,{className:"h-4 w-4"}),(e==null?void 0:e.description)&&s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:e==null?void 0:e.description})]},e==null?void 0:e.value))})]})]}),S&&!b&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S}),b&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:b})]})});O.displayName="Select";export{O as S};
