import{u as v,s as p,j as e}from"./index-B7Jx57M6.js";import{d as w,r as i,e as D}from"./vendor-react-DEK6ZklB.js";import k from"./index-n2WAlpAU.js";import{T as S}from"./TabNavigation-BwiyMJ_q.js";import{U as C}from"./UserMenu-BLe4sAG0.js";import{F as z}from"./Footer-BzsNiuzK.js";import{p as _,I as y,k as E,q as $,n as I,r as O}from"./vendor-ui-BmzNxrw7.js";import"./vendor-supabase-DfwcnzK-.js";import"./Button-DRPe_8g_.js";import"./PhotoGalleryModal-CYwUTdFI.js";import"./index-1Ar5VAb3.js";import"./Input-B_atqvlr.js";import"./CreateDogModal-pKEhvy9I.js";import"./Select-6JUoKzy5.js";import"./jspdf.es.min-CbJeJTAI.js";import"./PremiumBadge-CXujHqOf.js";const q=({dog:s})=>{var g,j;const{user:t}=v()||{},n=w(),[m,o]=i.useState(null),[u,d]=i.useState([]),[a,x]=i.useState(null);i.useEffect(()=>{t!=null&&t.id&&f(),c()},[t==null?void 0:t.id,s.user_id]);const f=async()=>{if(!(t!=null&&t.id)){d([]),o(null);return}try{const{data:r,error:l}=await p.from("dogs").select("*").eq("user_id",t.id).order("created_at",{ascending:!0});if(l)throw l;if(r&&r.length>0){d(r);const N=localStorage.getItem("currentDogProfile");o(N?JSON.parse(N):r[0])}}catch(r){console.error("Erreur chargement profils:",r)}},c=async()=>{try{const{data:r,error:l}=await p.from("users").select("id, name, avatar_url, city").eq("id",s.user_id).single();if(l)throw l;x(r)}catch(r){console.error("Erreur chargement propriÃ©taire:",r)}},h=r=>{o(r),localStorage.setItem("currentDogProfile",JSON.stringify(r))},b=r=>{if(!r)return"Ã‚ge inconnu";const l=Math.floor((new Date-new Date(r))/(365.25*24*60*60*1e3));return l<1?"Moins d'1 an":`${l} an${l>1?"s":""}`},P=()=>{navigator.share?navigator.share({title:`${s.name} - Doogybook`,text:`DÃ©couvrez ${s.name}, ${s.breed} de ${b(s.birth_date)}`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Lien copiÃ© !"))};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-card border-b border-border shadow-soft",children:e.jsx("div",{className:"max-w-screen-xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(_,{size:20}),e.jsx("span",{className:"font-medium",children:"Retour"})]}),t?e.jsx(C,{dogProfiles:u,currentDog:m,onDogChange:h}):e.jsx("button",{onClick:()=>n("/login"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-smooth",children:"Se connecter"})]})})}),e.jsx(S,{}),e.jsx("main",{className:"main-content flex-1",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-3xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(y,{size:20,className:"text-blue-600 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-blue-900",children:["Vous consultez la fiche publique de ",e.jsx("strong",{children:s.name}),". Seul le propriÃ©taire peut voir les informations de santÃ© complÃ¨tes."]})]}),e.jsx("div",{className:"relative aspect-[16/9] rounded-3xl overflow-hidden mb-6",children:s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-9xl text-white font-bold",children:(g=s.name)==null?void 0:g.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h1",{className:"text-3xl font-heading font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-gray-600 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-sm font-medium",children:s.breed}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-sm font-medium",children:s.gender==="male"?"MÃ¢le":"Femelle"}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-sm font-medium",children:b(s.birth_date)}),s.size&&e.jsxs("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-sm font-medium",children:["Taille : ",s.size]})]}),s.bio&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-heading font-semibold text-gray-900 mb-3",children:"ðŸ“– Ã€ propos"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.bio})]}),s.personality&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-heading font-semibold text-gray-900 mb-3",children:"âœ¨ PersonnalitÃ©"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.personality})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-heading font-semibold text-gray-900 mb-4",children:"â„¹ï¸ Informations"}),e.jsxs("div",{className:"space-y-3",children:[s.birth_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{size:20,className:"text-blue-600"}),e.jsxs("span",{className:"text-gray-700",children:["NÃ©(e) le ",new Date(s.birth_date).toLocaleDateString("fr-FR")]})]}),s.sterilized!==null&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{size:20,className:s.sterilized?"text-green-600":"text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.sterilized?"StÃ©rilisÃ©(e)":"Non stÃ©rilisÃ©(e)"})]}),s.weight&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{size:20,className:"text-blue-600"}),e.jsxs("span",{className:"text-gray-700",children:["Poids : ",s.weight," kg"]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-heading font-semibold text-gray-900 mb-4",children:"PropriÃ©taire"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.name,className:"w-16 h-16 rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl font-bold",children:(j=a.name)==null?void 0:j.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:a.name}),a.city&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(I,{size:14}),a.city]})]})]}),t?e.jsx("button",{onClick:()=>n(`/profile/${a.id}`),className:"w-full py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-smooth",children:"Voir le profil"}):e.jsx("button",{onClick:()=>n("/login"),className:"w-full py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-smooth",children:"Se connecter pour contacter"})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-200 p-6",children:e.jsxs("button",{onClick:P,className:"w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-smooth flex items-center justify-center gap-2",children:[e.jsx(O,{size:18}),"Partager ce profil"]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-3xl p-6 text-white",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"ðŸ• Profil vÃ©rifiÃ© Doogybook"}),e.jsx("p",{className:"text-sm text-white/90",children:"Ce chien fait partie de la communautÃ© Doogybook"})]})]})]})]})}),e.jsx(z,{})]})},Y=()=>{const{id:s}=D(),{user:t}=v()||{},n=w(),[m,o]=i.useState(null),[u,d]=i.useState(!0),[a,x]=i.useState(!1);i.useEffect(()=>{f()},[s,t==null?void 0:t.id]);const f=async()=>{d(!0);try{const{data:c,error:h}=await p.from("dogs").select("*").eq("id",s).single();if(h)throw h;o(c),t!=null&&t.id&&c.user_id===t.id?x(!0):x(!1)}catch(c){console.error("Erreur chargement chien:",c),n("/adoption")}finally{d(!1)}};return u?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full"})}):m?a?e.jsx(k,{}):e.jsx(q,{dog:m}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Chien introuvable"}),e.jsx("button",{onClick:()=>n("/adoption"),className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600",children:"Retour Ã  l'adoption"})]})})};export{Y as default};
