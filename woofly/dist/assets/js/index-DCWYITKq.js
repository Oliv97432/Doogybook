import{r as p,j as e}from"./vendor-react-CkOypKSt.js";import{Q as G}from"./vendor-misc-B8HVOz_X.js";import{A as H}from"./AuthenticationShell-5kHtl8x2.js";import{u as J,I as N,s as E}from"./index-CmpvQ7zl.js";import{I as x}from"./Input-lBQ8bs8G.js";import{B as v}from"./Button-Cc6JY5v3.js";import{S as P,C as W}from"./Select-CU7nFvAW.js";import{b as Y}from"./vendor-router-M7WQPhYn.js";import"./vendor-pdf-lazy-D4am8o_0.js";import"./vendor-supabase-DEZzVAXw.js";const Q=()=>{const h=Y(),{signUp:c}=J(),[d,C]=p.useState(1),[k,j]=p.useState(!1),[t,L]=p.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[r,R]=p.useState({dogName:"",breed:"",age:"",ageUnit:"years"}),[y,V]=p.useState(!1),[m,z]=p.useState(!1),[i,o]=p.useState({}),B=[{value:"malinois",label:"Malinois"},{value:"shih-tzu",label:"Shih-Tzu"},{value:"american-bully",label:"American Bully"},{value:"golden-retriever",label:"Golden Retriever"},{value:"labrador",label:"Labrador"},{value:"berger-allemand",label:"Berger Allemand"},{value:"bouledogue-francais",label:"Bouledogue Français"},{value:"chihuahua",label:"Chihuahua"},{value:"husky",label:"Husky Sibérien"},{value:"beagle",label:"Beagle"},{value:"mixed",label:"Race Mixte"},{value:"other",label:"Autre"}],I=[{value:"months",label:"Mois"},{value:"years",label:"Ans"}],U=()=>{var l,n,a,u,g;const s={};return(l=t==null?void 0:t.firstName)!=null&&l.trim()||(s.firstName="Le prénom est requis"),(n=t==null?void 0:t.lastName)!=null&&n.trim()||(s.lastName="Le nom est requis"),(a=t==null?void 0:t.email)!=null&&a.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t==null?void 0:t.email)||(s.email="Format d'email invalide"):s.email="L'email est requis",t!=null&&t.password?((u=t==null?void 0:t.password)==null?void 0:u.length)<8?s.password="Le mot de passe doit contenir au moins 8 caractères":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t==null?void 0:t.password)||(s.password="Le mot de passe doit contenir au moins une majuscule, une minuscule et un chiffre"):s.password="Le mot de passe est requis",t!=null&&t.confirmPassword?(t==null?void 0:t.password)!==(t==null?void 0:t.confirmPassword)&&(s.confirmPassword="Les mots de passe ne correspondent pas"):s.confirmPassword="Veuillez confirmer votre mot de passe",o(s),((g=Object.keys(s))==null?void 0:g.length)===0},F=()=>{var l,n,a;const s={};return m?(y||(s.terms="Vous devez accepter les conditions d'utilisation"),o(s),((l=Object.keys(s))==null?void 0:l.length)===0):((n=r==null?void 0:r.dogName)!=null&&n.trim()||(s.dogName="Le nom du chien est requis"),r!=null&&r.breed||(s.breed="Veuillez sélectionner une race"),r!=null&&r.age?isNaN(r==null?void 0:r.age)||(r==null?void 0:r.age)<0?s.age="Veuillez entrer un âge valide":(r==null?void 0:r.ageUnit)==="years"&&(r==null?void 0:r.age)>30?s.age="Veuillez entrer un âge valide (0-30 ans)":(r==null?void 0:r.ageUnit)==="months"&&(r==null?void 0:r.age)>360&&(s.age="Veuillez entrer un âge valide (0-360 mois)"):s.age="L'âge est requis",y||(s.terms="Vous devez accepter les conditions d'utilisation"),o(s),((a=Object.keys(s))==null?void 0:a.length)===0)},f=(s,l)=>{L(n=>({...n,[s]:l})),i!=null&&i[s]&&o(n=>({...n,[s]:""}))},b=(s,l)=>{R(n=>({...n,[s]:l})),i!=null&&i[s]&&o(n=>({...n,[s]:""}))},O=()=>{U()&&C(2)},w=()=>{C(1),o({}),z(!1)},M=()=>{z(!0),o(s=>{const l={...s};return delete l.dogName,delete l.breed,delete l.age,l})},$=(s,l)=>{const n=new Date;let a=new Date(n);return l==="years"?a.setFullYear(n.getFullYear()-parseInt(s)):a.setMonth(n.getMonth()-parseInt(s)),a.toISOString().split("T")[0]},T=async s=>{var l,n;if(s==null||s.preventDefault(),!!F()){j(!0),o({});try{const{data:a,error:u}=await c(t==null?void 0:t.email,t==null?void 0:t.password);if(u){o({general:(u==null?void 0:u.message)||"Échec de l'inscription. Veuillez réessayer."}),j(!1);return}const g=(l=a==null?void 0:a.user)==null?void 0:l.id;if(!g){o({general:"Erreur lors de la création du compte"}),j(!1);return}const{error:S}=await E.from("users").insert([{id:g,email:t==null?void 0:t.email,full_name:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`}]);if(S&&console.error("Erreur création profil utilisateur:",S),!m&&((n=r==null?void 0:r.dogName)!=null&&n.trim())){const _=$(r==null?void 0:r.age,r==null?void 0:r.ageUnit),{error:q}=await E.from("dogs").insert([{user_id:g,name:r==null?void 0:r.dogName,breed:r==null?void 0:r.breed,birth_date:_,is_active:!0}]);q&&console.error("Erreur création profil chien:",q)}h("/multi-profile-management")}catch(a){console.error("Erreur inscription:",a),o({general:"Une erreur inattendue s'est produite. Veuillez réessayer."})}finally{j(!1)}}};return e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${d>=1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:d>1?e.jsx(N,{name:"Check",size:20}):e.jsx("span",{className:"font-semibold",children:"1"})}),e.jsx("div",{className:"flex-1 h-1 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-primary transition-all duration-300 ${d>=2?"w-full":"w-0"}`})}),e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${d>=2?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:e.jsx("span",{className:"font-semibold",children:"2"})})]})}),(i==null?void 0:i.general)&&e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 text-destructive rounded-lg p-4",children:e.jsx("p",{className:"text-sm font-medium",children:i.general})}),d===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground mb-2",children:"Vos informations"}),e.jsx("p",{className:"text-sm text-muted-foreground font-caption",children:"Créez votre compte pour commencer"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{label:"Prénom",type:"text",placeholder:"Entrez votre prénom",value:t==null?void 0:t.firstName,onChange:s=>{var l;return f("firstName",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.firstName,required:!0}),e.jsx(x,{label:"Nom",type:"text",placeholder:"Entrez votre nom",value:t==null?void 0:t.lastName,onChange:s=>{var l;return f("lastName",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.lastName,required:!0})]}),e.jsx(x,{label:"Adresse email",type:"email",placeholder:"votre.email@exemple.fr",value:t==null?void 0:t.email,onChange:s=>{var l;return f("email",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.email,description:"Nous ne partagerons jamais votre email",required:!0}),e.jsx(x,{label:"Mot de passe",type:"password",placeholder:"Créez un mot de passe sécurisé",value:t==null?void 0:t.password,onChange:s=>{var l;return f("password",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.password,description:"Au moins 8 caractères avec majuscule, minuscule et chiffre",required:!0}),e.jsx(x,{label:"Confirmer le mot de passe",type:"password",placeholder:"Confirmez votre mot de passe",value:t==null?void 0:t.confirmPassword,onChange:s=>{var l;return f("confirmPassword",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.confirmPassword,required:!0}),e.jsx(v,{type:"button",variant:"default",fullWidth:!0,onClick:O,iconName:"ArrowRight",iconPosition:"right",children:"Continuer"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:["Vous avez déjà un compte ?"," ",e.jsx("button",{type:"button",onClick:()=>h("/login"),className:"text-primary hover:underline font-medium",children:"Se connecter"})]})})]}),d===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground mb-2",children:m?"Finaliser votre inscription":"Informations sur votre chien"}),e.jsx("p",{className:"text-sm text-muted-foreground font-caption",children:m?"Vous pourrez ajouter votre chien plus tard":"Parlez-nous de votre compagnon (optionnel)"})]}),m&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"✓ Aucun problème !"}),e.jsx("br",{}),"Vous pourrez ajouter votre chien depuis votre profil après l'inscription."]})}),!m&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Nom du chien",type:"text",placeholder:"Ex: Max, Bella, Rex...",value:r==null?void 0:r.dogName,onChange:s=>{var l;return b("dogName",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.dogName}),e.jsx(P,{label:"Race",placeholder:"Sélectionnez la race",options:B,value:r==null?void 0:r.breed,onChange:s=>b("breed",s),error:i==null?void 0:i.breed,searchable:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground",children:"Âge"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(x,{type:"number",placeholder:"Ex: 2",value:r==null?void 0:r.age,onChange:s=>{var l;return b("age",(l=s==null?void 0:s.target)==null?void 0:l.value)},error:i==null?void 0:i.age,min:"0",max:(r==null?void 0:r.ageUnit)==="years"?"30":"360"}),e.jsx(P,{options:I,value:r==null?void 0:r.ageUnit,onChange:s=>b("ageUnit",s)})]}),(i==null?void 0:i.age)&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.age})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 border border-border",children:e.jsx(W,{label:"J'accepte les conditions d'utilisation et la politique de confidentialité",checked:y,onChange:s=>{var l;V((l=s==null?void 0:s.target)==null?void 0:l.checked),i!=null&&i.terms&&o(n=>({...n,terms:""}))},error:i==null?void 0:i.terms,required:!0})}),m?e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>{z(!1),o({})},className:"flex-1",children:"Ajouter mon chien maintenant"}),e.jsx(v,{type:"submit",variant:"default",loading:k,iconName:"Check",iconPosition:"right",className:"flex-1",children:"Terminer l'inscription"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{type:"button",variant:"outline",onClick:w,iconName:"ArrowLeft",iconPosition:"left",className:"flex-1",children:"Retour"}),e.jsx(v,{type:"submit",variant:"default",loading:k,iconName:"Check",iconPosition:"right",className:"flex-1",children:"Créer mon compte"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:M,className:"text-sm text-muted-foreground hover:text-foreground underline font-medium",children:"Je n'ai pas encore de chien"})})]})]})]})},A=()=>{const h=[{icon:"Heart",title:"Suivi de santé complet",description:"Gardez un historique détaillé des vaccinations, traitements et visites vétérinaires"},{icon:"Users",title:"Communauté active",description:"Échangez avec d'autres propriétaires de la même race que votre chien"},{icon:"BookOpen",title:"Conseils quotidiens",description:"Recevez des astuces d'experts pour améliorer le bien-être de votre compagnon"},{icon:"Bell",title:"Rappels automatiques",description:"Ne manquez plus jamais un rendez-vous vétérinaire ou un traitement important"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-2xl mb-4",children:e.jsx(N,{name:"Dog",size:32,color:"var(--color-primary)"})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-heading font-semibold text-foreground mb-3",children:"Bienvenue sur Doogybook"}),e.jsx("p",{className:"text-muted-foreground font-caption text-base lg:text-lg",children:"La plateforme complète pour prendre soin de votre chien et rejoindre une communauté passionnée"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h==null?void 0:h.map((c,d)=>e.jsx("div",{className:"bg-card rounded-lg p-4 border border-border hover:shadow-elevated transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(N,{name:c==null?void 0:c.icon,size:20,color:"var(--color-primary)"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-heading font-semibold text-foreground mb-1",children:c==null?void 0:c.title}),e.jsx("p",{className:"text-sm text-muted-foreground font-caption",children:c==null?void 0:c.description})]})]})},d))}),e.jsx("div",{className:"bg-accent/10 rounded-lg p-4 border border-accent/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{name:"Info",size:20,color:"var(--color-accent)",className:"flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-accent-foreground font-caption",children:[e.jsx("strong",{className:"font-semibold",children:"Gratuit et sans engagement."})," Commencez dès maintenant à gérer la santé de votre chien et connectez-vous avec des milliers de propriétaires."]})})]})})]})},ne=()=>e.jsxs(e.Fragment,{children:[e.jsxs(G,{children:[e.jsx("title",{children:"Inscription - Doogybook"}),e.jsx("meta",{name:"description",content:"Créez votre compte Doogybook et commencez à gérer la santé de votre chien. Rejoignez une communauté de propriétaires passionnés."})]}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"container mx-auto px-4 py-8 lg:py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 max-w-7xl mx-auto",children:[e.jsx("div",{className:"hidden lg:flex flex-col justify-center",children:e.jsx(A,{})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(H,{title:"Créer un compte",subtitle:"Rejoignez la communauté Doogybook",children:e.jsx(Q,{})})})}),e.jsx("div",{className:"lg:hidden",children:e.jsx(A,{})})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card/80 backdrop-blur-sm border-t border-border py-3 px-4 lg:hidden",children:e.jsx("p",{className:"text-xs text-center text-muted-foreground font-caption",children:"En créant un compte, vous acceptez nos conditions d'utilisation"})})]})]});export{ne as default};
