import{u as ve,s as d,j as t,I as x}from"./index-B_5e2oWA.js";import{d as be,r as l}from"./vendor-react-DEK6ZklB.js";import{T as re}from"./TabNavigation-B4QAA3fk.js";import{U as we}from"./UserMenu-UCWH4mPE.js";import{B as y}from"./Button-DtR45FsX.js";import{V as je,T as ie,W as Ne,H as ye,A as _e,a as ne,b as De,E as Se,P as Fe}from"./PhotoGalleryModal-DW7a5J6I.js";import{F as Ee}from"./Footer-Cm1OGO0B.js";import{P as Ce}from"./PremiumModal-BKn172y9.js";import{E as Te}from"./jspdf.es.min-BmRkZUQb.js";import"./vendor-ui-DjEwDNDD.js";import"./vendor-supabase-DfwcnzK-.js";import"./index-1Ar5VAb3.js";import"./Input-D8JyThej.js";const ze=(w,c=800,j=75)=>{if(!w)return null;if(w.includes("supabase.co")&&w.includes("storage/v1/object/public")){const S=w.includes("?")?"&":"?";return`${w}${S}width=${c}&quality=${j}&format=webp`}return w},R=l.memo(({src:w,alt:c,width:j=800,quality:S=75,className:O="",eager:z=!1})=>{const[F,M]=l.useState(!1),[P,k]=l.useState(!1);return t.jsxs("div",{className:"relative w-full h-full",children:[!F&&!P&&t.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),P?t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100",children:t.jsx("span",{className:"text-4xl font-bold text-primary/30",children:c==null?void 0:c.charAt(0).toUpperCase()})}):t.jsx("img",{src:ze(w,j,S),alt:c,loading:z?"eager":"lazy",decoding:"async",onLoad:()=>M(!0),onError:()=>k(!0),className:`${O} ${F?"opacity-100":"opacity-0"} transition-opacity duration-300`})]})});R.displayName="OptimizedImage";const Be=()=>{const w=be(),{user:c}=ve(),[j,S]=l.useState("vaccinations"),[O,z]=l.useState(!0),[F,M]=l.useState(!1),[P,k]=l.useState(!1),[A,V]=l.useState(!1),[oe,$]=l.useState([]),[i,E]=l.useState(null),[C,I]=l.useState([]),[T,L]=l.useState([]),[_,q]=l.useState([]),[g,W]=l.useState({allergies:"",medications:"",veterinaryNotes:"",veterinarian:"",veterinarianPhone:""}),[le,B]=l.useState([]),[G,H]=l.useState(!1),[D,Y]=l.useState({vaccination:!1,vermifuge:!1,flea:!1,weight:!1,editProfile:!1,gallery:!1}),[v,J]=l.useState(null);l.useEffect(()=>{(async()=>{if(c!=null&&c.id)try{const{data:s}=await d.from("user_profiles").select("subscription_tier").eq("id",c.id).single();M(["premium","professional"].includes(s==null?void 0:s.subscription_tier))}catch(s){console.error("Erreur vÃ©rification premium:",s)}})()},[c==null?void 0:c.id]),l.useEffect(()=>{if(!(c!=null&&c.id))return;(async()=>{z(!0);try{const{data:s,error:n}=await d.from("dogs").select("id, name, breed, birth_date, weight, gender, is_sterilized, photo_url, microchip_number, notes, cover_photo_url").eq("user_id",c.id).eq("is_active",!0).order("created_at",{ascending:!1}).limit(10);if(n)throw n;const r=s.map(a=>{const o=new Date(a.birth_date),m=new Date;let f=m.getFullYear()-o.getFullYear();const N=m.getMonth()-o.getMonth();return(N<0||N===0&&m.getDate()<o.getDate())&&f--,{id:a.id,name:a.name,breed:a.breed||"Race inconnue",age:f>0?`${f} an${f>1?"s":""}`:"Moins d'un an",weight:a.weight?`${a.weight} kg`:"Non renseignÃ©",gender:a.gender||"Non renseignÃ©",sterilized:a.is_sterilized?"StÃ©rilisÃ©":"Non stÃ©rilisÃ©",image:a.photo_url||"https://images.pexels.com/photos/1490908/pexels-photo-1490908.jpeg",imageAlt:`${a.name} - ${a.breed}`,microchip_number:a.microchip_number,notes:a.notes,cover_photo_url:a.cover_photo_url||null,birth_date:a.birth_date}});$(r),r.length>0&&E(r[0])}catch(s){console.error("Erreur chargement chiens:",s)}finally{z(!1)}})()},[c==null?void 0:c.id]),l.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{try{const{data:s,error:n}=await d.from("vaccinations").select("id, vaccine_name, vaccination_date, next_due_date, veterinarian, notes").eq("dog_id",i.id).order("next_due_date",{ascending:!0}).limit(50);if(n)throw n;const r=s.map(a=>({id:a.id,name:a.vaccine_name,lastDate:new Date(a.vaccination_date).toLocaleDateString("fr-FR"),nextDate:a.next_due_date?new Date(a.next_due_date).toLocaleDateString("fr-FR"):"Non dÃ©fini",veterinarian:a.veterinarian,notes:a.notes}));I(r)}catch(s){console.error("Erreur chargement vaccinations:",s)}})()},[i==null?void 0:i.id]),l.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{try{const{data:s,error:n}=await d.from("treatments").select("id, product_name, treatment_date, next_due_date, notes, treatment_type").eq("dog_id",i.id).order("next_due_date",{ascending:!0}).limit(50);if(n)throw n;const r=s.map(a=>({id:a.id,product:a.product_name,lastDate:new Date(a.treatment_date).toLocaleDateString("fr-FR"),nextDate:a.next_due_date?new Date(a.next_due_date).toLocaleDateString("fr-FR"):"Non dÃ©fini",notes:a.notes,type:a.treatment_type}));L(r)}catch(s){console.error("Erreur chargement traitements:",s)}})()},[i==null?void 0:i.id]),l.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{try{const{data:s,error:n}=await d.from("weight_records").select("measurement_date, weight").eq("dog_id",i.id).order("measurement_date",{ascending:!0}).limit(100);if(n)throw n;const r=s.map(a=>({date:new Date(a.measurement_date).toLocaleDateString("fr-FR"),weight:parseFloat(a.weight)}));q(r)}catch(s){console.error("Erreur chargement poids:",s)}})()},[i==null?void 0:i.id]),l.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{var s,n,r;try{const{data:a,error:o}=await d.from("health_notes").select("description, tags, title").eq("dog_id",i.id).order("note_date",{ascending:!1}).limit(1);if(o)throw o;if(a&&a.length>0){const m=a[0];W({allergies:(s=m.tags)!=null&&s.includes("allergies")?m.description:"",medications:(n=m.tags)!=null&&n.includes("medications")?m.description:"",veterinaryNotes:m.description||"",veterinarian:(r=m.tags)!=null&&r.includes("vet")?m.title:"",veterinarianPhone:""})}}catch(a){console.error("Erreur chargement notes santÃ©:",a)}})()},[i==null?void 0:i.id]),l.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{try{const{data:s,error:n}=await d.from("dog_photos").select("id, photo_url, created_at").eq("dog_id",i.id).order("created_at",{ascending:!1}).limit(50);if(n)throw n;B(s||[])}catch(s){console.error("Erreur chargement photos:",s)}})()},[i==null?void 0:i.id]);const b=l.useCallback((e,s=null)=>{J(s),Y(n=>({...n,[e]:!0}))},[]),p=l.useCallback(e=>{Y(s=>({...s,[e]:!1})),J(null)},[]),ce=l.useCallback(async e=>{try{if(v){const{error:s}=await d.from("vaccinations").update({vaccine_name:e.name,vaccination_date:new Date(e.lastDate).toISOString().split("T")[0],next_due_date:e.nextDate?new Date(e.nextDate).toISOString().split("T")[0]:null,veterinarian:e.veterinarian,notes:e.notes}).eq("id",v.id);if(s)throw s;I(n=>n.map(r=>r.id===v.id?{...e,id:r.id}:r))}else{const{data:s,error:n}=await d.from("vaccinations").insert([{dog_id:i.id,vaccine_name:e.name,vaccination_date:new Date(e.lastDate).toISOString().split("T")[0],next_due_date:e.nextDate?new Date(e.nextDate).toISOString().split("T")[0]:null,veterinarian:e.veterinarian,notes:e.notes}]).select().single();if(n)throw n;I(r=>[...r,{id:s.id,name:e.name,lastDate:new Date(e.lastDate).toLocaleDateString("fr-FR"),nextDate:e.nextDate?new Date(e.nextDate).toLocaleDateString("fr-FR"):"Non dÃ©fini",veterinarian:e.veterinarian,notes:e.notes}])}p("vaccination")}catch(s){console.error("Erreur sauvegarde vaccination:",s),alert("Erreur lors de la sauvegarde de la vaccination")}},[v,i,p]),de=l.useCallback(async e=>{if(window.confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette vaccination ?"))try{const{error:s}=await d.from("vaccinations").delete().eq("id",e);if(s)throw s;I(n=>n.filter(r=>r.id!==e))}catch(s){console.error("Erreur suppression vaccination:",s),alert("Erreur lors de la suppression")}},[]),K=l.useCallback(async(e,s)=>{try{const n=s==="vermifuge"?"worm":"flea";if(v){const{error:r}=await d.from("treatments").update({product_name:e.product,treatment_date:new Date(e.lastDate).toISOString().split("T")[0],next_due_date:e.nextDate?new Date(e.nextDate).toISOString().split("T")[0]:null,notes:e.notes,treatment_type:n}).eq("id",v.id);if(r)throw r;L(a=>a.map(o=>o.id===v.id?{...e,id:o.id,type:n}:o))}else{const{data:r,error:a}=await d.from("treatments").insert([{dog_id:i.id,product_name:e.product,treatment_date:new Date(e.lastDate).toISOString().split("T")[0],next_due_date:e.nextDate?new Date(e.nextDate).toISOString().split("T")[0]:null,notes:e.notes,treatment_type:n}]).select().single();if(a)throw a;L(o=>[...o,{id:r.id,product:e.product,lastDate:new Date(e.lastDate).toLocaleDateString("fr-FR"),nextDate:e.nextDate?new Date(e.nextDate).toLocaleDateString("fr-FR"):"Non dÃ©fini",notes:e.notes,type:n}])}p(s)}catch(n){console.error("Erreur sauvegarde traitement:",n),alert("Erreur lors de la sauvegarde du traitement")}},[v,i,p]),Q=l.useCallback(async e=>{if(window.confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce traitement ?"))try{const{error:s}=await d.from("treatments").delete().eq("id",e);if(s)throw s;L(n=>n.filter(r=>r.id!==e))}catch(s){console.error("Erreur suppression traitement:",s),alert("Erreur lors de la suppression")}},[]),me=l.useCallback(async e=>{try{const{data:s,error:n}=await d.from("weight_records").insert([{dog_id:i.id,weight:parseFloat(e.weight),measurement_date:new Date(e.date).toISOString().split("T")[0]}]).select().single();if(n)throw n;q(r=>[...r,{date:new Date(e.date).toLocaleDateString("fr-FR"),weight:parseFloat(e.weight)}]),p("weight")}catch(s){console.error("Erreur sauvegarde poids:",s),alert("Erreur lors de la sauvegarde du poids")}},[i,p]),ue=l.useCallback(async e=>{try{const{error:s}=await d.from("dogs").update({name:e.name,breed:e.breed,gender:e.gender,weight:parseFloat(e.weight.replace(" kg","")),is_sterilized:e.sterilized==="StÃ©rilisÃ©",notes:e.notes,microchip_number:e.microchip_number}).eq("id",i.id);if(s)throw s;E(e),$(n=>n.map(r=>r.id===i.id?e:r)),p("editProfile")}catch(s){console.error("Erreur sauvegarde profil:",s),alert("Erreur lors de la sauvegarde du profil")}},[i,p]),he=l.useCallback(async e=>{try{const{error:s}=await d.from("dogs").update({photo_url:e}).eq("id",i.id);if(s)throw s;E(n=>({...n,image:e})),$(n=>n.map(r=>r.id===i.id?{...r,image:e}:r))}catch(s){console.error("Erreur mise Ã  jour photo de profil:",s),alert("âŒ Erreur lors de la mise Ã  jour de la photo de profil")}},[i]),pe=l.useCallback(async e=>{var r;const s=(r=e.target.files)==null?void 0:r[0];if(!s)return;if(!s.name||typeof s.name!="string"){alert("âš ï¸ Fichier invalide");return}if(s.size>5*1024*1024){alert("âš ï¸ L'image est trop volumineuse (max 5MB)");return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type)){alert("âš ï¸ Format non supportÃ©. Utilisez JPG, PNG ou WEBP");return}H(!0);try{const a=s.name.split(".").pop().toLowerCase(),o=`${c.id}/${i.id}/cover_${Date.now()}.${a}`,{error:m}=await d.storage.from("dog-photos").upload(o,s,{contentType:s.type,cacheControl:"3600",upsert:!1});if(m){if(m.message.includes("Bucket not found")){alert(`âš ï¸ Le bucket de stockage n'existe pas.

ðŸ“‹ Instructions:
1. Va dans Supabase > Storage
2. CrÃ©e un bucket "dog-photos"
3. Coche "Public bucket"
4. RÃ©essaye`);return}throw m}const{data:{publicUrl:f}}=d.storage.from("dog-photos").getPublicUrl(o),{error:N}=await d.from("dogs").update({cover_photo_url:f}).eq("id",i.id);if(N)throw N;E(u=>({...u,cover_photo_url:f})),$(u=>u.map(h=>h.id===i.id?{...h,cover_photo_url:f}:h)),alert("âœ… Photo de couverture mise Ã  jour !"),e.target.value=""}catch(a){console.error("Erreur upload cover:",a),alert("âŒ Erreur lors de l'upload: "+a.message)}finally{H(!1)}},[c,i]),ge=l.useCallback(async e=>{if(!e){alert("âš ï¸ Aucun fichier sÃ©lectionnÃ©");return}if(!e.name||typeof e.name!="string"){alert("âš ï¸ Fichier invalide");return}if(e.size>5*1024*1024){alert("âš ï¸ L'image est trop volumineuse (max 5MB)");return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)){alert("âš ï¸ Format non supportÃ©. Utilisez JPG, PNG ou WEBP");return}try{const n=e.name.split(".").pop().toLowerCase(),r=`${c.id}/${i.id}/${Date.now()}.${n}`,{error:a}=await d.storage.from("dog-photos").upload(r,e,{contentType:e.type,cacheControl:"3600",upsert:!1});if(a){if(a.message.includes("Bucket not found")){alert(`âš ï¸ Le bucket de stockage n'existe pas.

ðŸ“‹ Instructions:
1. Va dans Supabase > Storage
2. CrÃ©e un bucket "dog-photos"
3. Coche "Public bucket"
4. RÃ©essaye`);return}throw a}const{data:{publicUrl:o}}=d.storage.from("dog-photos").getPublicUrl(r),{data:m,error:f}=await d.from("dog_photos").insert([{dog_id:i.id,photo_url:o,created_at:new Date().toISOString()}]).select().single();if(f){if(f.message.includes('relation "dog_photos" does not exist')){alert(`âš ï¸ La table dog_photos n'existe pas.

ðŸ“‹ ExÃ©cute le SQL:
CREATE TABLE dog_photos (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  dog_id UUID REFERENCES dogs(id) ON DELETE CASCADE,
  photo_url TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);`);return}throw f}B(N=>[m,...N]),alert("âœ… Photo ajoutÃ©e avec succÃ¨s !")}catch(n){console.error("Erreur upload photo:",n),alert("âŒ Erreur lors de l'upload: "+n.message)}},[c,i]),X=e=>{if(!e)return"";let s=e.normalize("NFD");return s=s.replace(/[\u0300-\u036f]/g,""),s=s.replace(/Å“/g,"oe").replace(/Ã¦/g,"ae").replace(/Å’/g,"OE").replace(/Ã†/g,"AE").replace(/[â‚¬Â£$Â¥]/g,"").replace(/[Â«Â»]/g,"").replace(/[^a-zA-Z0-9\s.,;:!?()\-'"\/&@#%+=_]/g," "),s=s.replace(/\s+/g," "),s=s.trim(),s},Z=l.useCallback(async()=>{if(!F){k(!0);return}V(!0);try{const e=new Te({orientation:"p",unit:"mm",format:"a4",compress:!0}),s=e.internal.pageSize.getWidth(),n=e.internal.pageSize.getHeight(),r=20;let a=r;const o=(u,h,ae,se={})=>{try{const U=String(u||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"");e.text(U,h,ae,se)}catch(U){console.error("Erreur ajout texte:",U),e.text("Error",h,ae,se)}};e.setFillColor(59,130,246),e.rect(0,0,s,50,"F"),e.setTextColor(255,255,255),e.setFontSize(28),e.setFont("helvetica","bold"),o("WOOFLY",r,25),e.setFontSize(14),e.setFont("helvetica","normal"),o("Carnet de Sante",r,38),a=60,e.setTextColor(0,0,0),e.setFontSize(22),e.setFont("helvetica","bold"),o(i.name,r,a),a+=10,e.setFontSize(11),e.setFont("helvetica","normal"),e.setTextColor(100,100,100);const m=i.gender==="male"?"Male":"Femelle";o(`${i.breed} - ${i.age} - ${m}`,r,a),a+=6,i.weight!=="Non renseigne"&&(o(`Poids: ${i.weight}`,r,a),a+=6),i.microchip_number&&(o(`Puce: ${i.microchip_number}`,r,a),a+=6),o(`Sterilisation: ${i.sterilized}`,r,a),a+=15,e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(0,0,0),o("VACCINATIONS",r,a),a+=8,C.length===0?(e.setFontSize(10),e.setFont("helvetica","italic"),e.setTextColor(150,150,150),o("Aucune vaccination enregistree",r+5,a),a+=10):(e.setFontSize(10),e.setFont("helvetica","normal"),C.forEach(u=>{a>n-40&&(e.addPage(),a=r),e.setFont("helvetica","bold"),e.setTextColor(0,0,0),o(`- ${u.name}`,r+5,a),a+=5,e.setFont("helvetica","normal"),e.setTextColor(80,80,80),o(`  Derniere date: ${u.lastDate}`,r+5,a),a+=5,o(`  Prochaine date: ${u.nextDate}`,r+5,a),a+=5,u.veterinarian&&(o(`  Veterinaire: ${u.veterinarian}`,r+5,a),a+=5),a+=3})),a+=8,a>n-60&&(e.addPage(),a=r),e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(0,0,0),o("TRAITEMENTS",r,a),a+=8,T.length===0?(e.setFontSize(10),e.setFont("helvetica","italic"),e.setTextColor(150,150,150),o("Aucun traitement enregistre",r+5,a),a+=10):(e.setFontSize(10),e.setFont("helvetica","normal"),T.forEach(u=>{a>n-40&&(e.addPage(),a=r);const h=u.type==="worm"?"Vermifuge":"Anti-puces/tiques";e.setFont("helvetica","bold"),e.setTextColor(0,0,0),o(`- ${u.product} (${h})`,r+5,a),a+=5,e.setFont("helvetica","normal"),e.setTextColor(80,80,80),o(`  Derniere date: ${u.lastDate}`,r+5,a),a+=5,o(`  Prochaine date: ${u.nextDate}`,r+5,a),a+=8})),a+=8,a>n-60&&(e.addPage(),a=r),e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(0,0,0),o("EVOLUTION DU POIDS",r,a),a+=8,_.length===0?(e.setFontSize(10),e.setFont("helvetica","italic"),e.setTextColor(150,150,150),o("Aucune pesee enregistree",r+5,a),a+=10):(e.setFontSize(10),e.setFont("helvetica","normal"),e.setTextColor(80,80,80),_.slice(-5).forEach(h=>{o(`- ${h.date}: ${h.weight} kg`,r+5,a),a+=5}),_.length>5&&(a+=3,e.setFont("helvetica","italic"),o(`(${_.length-5} autres pesees non affichees)`,r+5,a))),a+=12,a>n-80&&(e.addPage(),a=r),e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(0,0,0),o("NOTES MEDICALES",r,a),a+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.setTextColor(80,80,80),g.allergies&&(e.setFont("helvetica","bold"),o("Allergies:",r+5,a),a+=5,e.setFont("helvetica","normal"),e.splitTextToSize(X(g.allergies),s-r*2-10).forEach(h=>{o(h,r+5,a),a+=5}),a+=5),g.medications&&(e.setFont("helvetica","bold"),o("Medicaments:",r+5,a),a+=5,e.setFont("helvetica","normal"),e.splitTextToSize(X(g.medications),s-r*2-10).forEach(h=>{o(h,r+5,a),a+=5}),a+=5),g.veterinarian&&(e.setFont("helvetica","bold"),o("Veterinaire:",r+5,a),a+=5,e.setFont("helvetica","normal"),o(g.veterinarian,r+5,a),a+=5),g.veterinarianPhone&&(o(`Telephone: ${g.veterinarianPhone}`,r+5,a),a+=5),!g.allergies&&!g.medications&&!g.veterinarian&&(e.setFont("helvetica","italic"),e.setTextColor(150,150,150),o("Aucune note medicale enregistree",r+5,a)),e.setTextColor(150,150,150),e.setFontSize(8),o("Genere avec Woofly - www.doogybook.com",s/2,n-10,{align:"center"}),o(`Date: ${new Date().toLocaleDateString("fr-FR")}`,s-r,n-10,{align:"right"});const N=`carnet-sante-${i.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.pdf`;e.save(N),alert("Carnet de sante telecharge avec succes !")}catch(e){console.error("Erreur generation PDF:",e),alert("Erreur lors de la generation du PDF: "+e.message)}finally{V(!1)}},[F,i,C,T,_,g]),fe=l.useCallback(e=>{E(e)},[]),xe=[{id:"vaccinations",label:"Vaccinations",icon:"Syringe"},{id:"vermifuge",label:"Vermifuge",icon:"Pill"},{id:"flea",label:"Anti-puces",icon:"Bug"},{id:"weight",label:"Poids",icon:"TrendingUp"},{id:"notes",label:"Notes mÃ©dicales",icon:"FileText"}],ee=T.filter(e=>e.type==="worm"),te=T.filter(e=>e.type==="flea"||e.type==="tick");return O?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})]})}):i?t.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[t.jsx("div",{className:"sticky top-0 z-50 bg-card border-b border-border shadow-soft px-3 sm:px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("h1",{className:"text-lg sm:text-xl font-heading font-semibold text-foreground truncate flex-1",children:i.name}),t.jsx("button",{onClick:Z,disabled:A,className:"hidden sm:flex items-center gap-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 min-h-[44px] text-sm",children:A?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Export..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(x,{name:"Download",size:16}),t.jsx("span",{children:"Carnet PDF"})]})}),t.jsx(we,{dogProfiles:oe,currentDog:i,onDogChange:fe})]})}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"relative h-32 sm:h-40 bg-gradient-to-br from-blue-500 to-purple-600 overflow-hidden",children:[i.cover_photo_url?t.jsx(R,{src:i.cover_photo_url,alt:`Couverture de ${i.name}`,width:1200,quality:85,eager:!0,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/30",children:t.jsx(x,{name:"Image",size:24})}),t.jsxs("label",{htmlFor:"cover-photo-upload-input",className:"absolute bottom-2 sm:bottom-3 right-2 sm:right-3 z-10 bg-white/90 hover:bg-white px-2.5 sm:px-3 py-2 rounded-lg cursor-pointer shadow-lg transition-smooth flex items-center gap-1.5 sm:gap-2 min-h-[44px]",children:[t.jsx(x,{name:"Camera",size:16}),t.jsx("span",{className:"font-medium text-xs sm:text-sm",children:G?"Upload...":"Modifier"}),t.jsx("input",{id:"cover-photo-upload-input",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:pe,className:"hidden",disabled:G})]})]}),t.jsx("div",{className:"relative max-w-7xl mx-auto px-3 sm:px-4",children:t.jsxs("div",{className:"flex items-end gap-3 sm:gap-4 -mt-10 sm:-mt-12 pb-3 sm:pb-4",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[t.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full border-4 border-card bg-gradient-to-br from-blue-500 to-purple-600 overflow-hidden shadow-xl",children:t.jsx(R,{src:i.image,alt:i.name,width:200,quality:80,eager:!0,className:"w-full h-full object-cover"})}),t.jsx("button",{onClick:()=>b("gallery"),className:"absolute bottom-0 right-0 bg-primary hover:bg-primary/90 text-white p-1.5 sm:p-2 rounded-full cursor-pointer shadow-lg transition-smooth min-w-[36px] min-h-[36px] flex items-center justify-center",children:t.jsx(x,{name:"Camera",size:14,className:"sm:w-4 sm:h-4"})})]}),t.jsxs("div",{className:"flex-1 pb-1 min-w-0",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-heading font-bold text-foreground truncate",children:i.name}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-1.5 text-muted-foreground text-xs mt-1",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(x,{name:"Dog",size:12}),t.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:i.breed})]}),t.jsx("span",{className:"text-gray-300",children:"â€¢"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(x,{name:"Calendar",size:12}),t.jsx("span",{className:"whitespace-nowrap",children:i.age})]}),t.jsx("span",{className:"text-gray-300",children:"â€¢"}),t.jsx("span",{className:"flex items-center gap-1",children:i.gender==="male"?t.jsxs(t.Fragment,{children:[t.jsx(x,{name:"Mars",size:12}),t.jsx("span",{children:"MÃ¢le"})]}):t.jsxs(t.Fragment,{children:[t.jsx(x,{name:"Venus",size:12}),t.jsx("span",{children:"Femelle"})]})})]})]})]})})]}),t.jsx(re,{}),t.jsx("main",{className:"main-content flex-1 pb-20",children:t.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:t.jsx("div",{className:"mt-3 sm:mt-4",children:t.jsxs("div",{className:"bg-card rounded-lg shadow-soft overflow-hidden",children:[t.jsx("div",{className:"border-b border-border overflow-x-auto",children:t.jsx("div",{className:"flex min-w-max px-2",children:xe.map(e=>t.jsxs("button",{onClick:()=>S(e.id),className:`flex items-center gap-2 px-3 sm:px-4 py-3 font-medium transition-smooth border-b-2 text-xs sm:text-sm min-h-[44px] ${j===e.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[t.jsx(x,{name:e.icon,size:16,className:"sm:w-[18px] sm:h-[18px]"}),t.jsx("span",{className:"whitespace-nowrap",children:e.label})]},e.id))})}),t.jsxs("div",{className:"p-3 sm:p-4",children:[j==="vaccinations"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col items-start justify-between gap-3 mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-base sm:text-lg font-heading font-semibold text-foreground mb-1",children:"Vaccinations"}),t.jsxs("p",{className:"text-xs text-muted-foreground font-caption",children:["GÃ©rez le calendrier vaccinal de ",i.name]})]}),t.jsx(y,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>b("vaccination"),size:"sm",className:"w-full min-h-[44px]",children:"Ajouter une vaccination"})]}),C.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(x,{name:"Syringe",size:24,color:"var(--color-muted-foreground)"})}),t.jsx("p",{className:"text-sm text-muted-foreground font-caption mb-4",children:"Aucune vaccination enregistrÃ©e"}),t.jsx(y,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>b("vaccination"),size:"sm",className:"w-full min-h-[44px]",children:"Ajouter une vaccination"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-3",children:C.map(e=>t.jsx(je,{vaccination:e,onEdit:s=>b("vaccination",s),onDelete:de},e.id))})]}),j==="vermifuge"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col items-start justify-between gap-3 mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-base sm:text-lg font-heading font-semibold text-foreground mb-1",children:"Vermifuge"}),t.jsx("p",{className:"text-xs text-muted-foreground font-caption",children:"Suivez les traitements antiparasitaires internes"})]}),t.jsx(y,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>b("vermifuge"),size:"sm",className:"w-full min-h-[44px]",children:"Ajouter un traitement"})]}),ee.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(x,{name:"Pill",size:24,color:"var(--color-muted-foreground)"})}),t.jsx("p",{className:"text-sm text-muted-foreground font-caption mb-4",children:"Aucun traitement vermifuge enregistrÃ©"}),t.jsx(y,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>b("vermifuge"),size:"sm",className:"w-full min-h-[44px]",children:"Ajouter un traitement"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-3",children:ee.map(e=>t.jsx(ie,{treatment:e,type:"vermifuge",onEdit:s=>b("vermifuge",s),onDelete:s=>Q(s)},e.id))})]}),j==="flea"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col items-start justify-between gap-3 mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-base sm:text-lg font-heading font-semibold text-foreground mb-1",children:"Anti-puces et tiques"}),t.jsx("p",{className:"text-xs text-muted-foreground font-caption",children:"GÃ©rez les traitements antiparasitaires externes"})]}),t.jsx(y,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>b("flea"),size:"sm",className:"w-full min-h-[44px]",children:"Ajouter un traitement"})]}),te.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(x,{name:"Bug",size:24,color:"var(--color-muted-foreground)"})}),t.jsx("p",{className:"text-sm text-muted-foreground font-caption mb-4",children:"Aucun traitement anti-puces enregistrÃ©"}),t.jsx(y,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>b("flea"),size:"sm",className:"w-full min-h-[44px]",children:"Ajouter un traitement"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-3",children:te.map(e=>t.jsx(ie,{treatment:e,type:"flea",onEdit:s=>b("flea",s),onDelete:s=>Q(s)},e.id))})]}),j==="weight"&&t.jsx(Ne,{data:_,onAddWeight:()=>b("weight")}),j==="notes"&&t.jsx(ye,{notes:g,onSave:W})]})]})})})}),t.jsx("button",{onClick:Z,disabled:A,className:"sm:hidden fixed bottom-20 right-3 sm:right-4 z-40 w-14 h-14 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full shadow-lg flex items-center justify-center disabled:opacity-50",children:A?t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):t.jsx(x,{name:"Download",size:22})}),t.jsx(_e,{isOpen:D.vaccination,onClose:()=>p("vaccination"),onSave:ce,editData:v}),t.jsx(ne,{isOpen:D.vermifuge,onClose:()=>p("vermifuge"),onSave:e=>K(e,"vermifuge"),editData:v,type:"vermifuge"}),t.jsx(ne,{isOpen:D.flea,onClose:()=>p("flea"),onSave:e=>K(e,"flea"),editData:v,type:"flea"}),t.jsx(De,{isOpen:D.weight,onClose:()=>p("weight"),onSave:me}),t.jsx(Se,{isOpen:D.editProfile,onClose:()=>p("editProfile"),onSave:ue,profile:i}),t.jsx(Fe,{isOpen:D.gallery,onClose:()=>p("gallery"),photos:le,onAddPhoto:ge,currentProfilePhotoUrl:i==null?void 0:i.image,onSetProfilePhoto:he}),t.jsx(Ce,{isOpen:P,onClose:()=>k(!1),reason:"health-pdf"}),t.jsx(Ee,{})]}):t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(re,{}),t.jsx("div",{className:"main-content",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:t.jsxs("div",{className:"text-center py-12 sm:py-16",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-muted rounded-full mb-4",children:t.jsx("span",{className:"text-3xl",children:"ðŸ•"})}),t.jsx("h3",{className:"text-lg font-heading font-semibold text-foreground mb-2",children:"Aucun chien enregistrÃ©"}),t.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4",children:"Ajoutez votre premier chien pour commencer"}),t.jsx(y,{variant:"default",size:"sm",onClick:()=>w("/multi-profile-management"),className:"min-h-[44px]",children:"Ajouter un chien"})]})})})]})};export{Be as default};
