import{u as o,j as e,s as i}from"./index-CLNZn26n.js";import{d as c,r as l}from"./vendor-react-DEK6ZklB.js";import"./vendor-ui-DjEwDNDD.js";import"./vendor-supabase-DfwcnzK-.js";const b=()=>{const{user:r}=o(),s=c(),[n,d]=l.useState(!0);return l.useEffect(()=>{(async()=>{if(!r){s("/login");return}try{const{data:t,error:u}=await i.from("user_profiles").select("is_admin, email, id").eq("email",r.email).single();if(t&&t.is_admin===!0){s("/admin/dashboard");return}const{data:a,error:x}=await i.from("professional_accounts").select("id, is_active").eq("user_id",r.id).single();a&&a.is_active?s("/pro/dashboard"):s("/dog-profile")}catch{s("/dog-profile")}finally{d(!1)}})()},[r,s]),n?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center w-full max-w-sm mx-auto",children:[e.jsx("div",{className:"relative mb-6",children:e.jsxs("div",{className:"w-20 h-20 mx-auto",children:[e.jsx("div",{className:"animate-spin h-20 w-20 border-4 border-blue-500 border-t-transparent rounded-full"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:"D"})})})]})}),e.jsx("h2",{className:"text-xl font-heading font-semibold text-foreground mb-2",children:"Doogybook"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Préparation de votre espace..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-1.5 rounded-full animate-pulse"})}),e.jsxs("div",{className:"mt-8 space-y-2 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vérification du compte"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Chargement des données"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Redirection vers votre tableau de bord"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-6",children:"Si la redirection prend trop de temps, vérifiez votre connexion."})]})}):null};export{b as default};
