import{j as e,s as o,u as ce}from"./index-BK5E7uAP.js";import{r as l,e as me,d as xe}from"./vendor-react-DEK6ZklB.js";import{X as R,q as W,y as X,o as ue,a7 as pe,af as he,ag as fe,l as ge,P as K,$ as be,n as je,m as ye,H as ve,a5 as Ne,E as we,N as _e,J as Ce}from"./vendor-ui-DjEwDNDD.js";import{U as Se}from"./UserMenuPro-Dkx6zORV.js";import"./vendor-supabase-DfwcnzK-.js";const ke=({dog:n,professionalAccountId:N,onClose:i,onSuccess:w})=>{const[f,h]=l.useState(1),[x,z]=l.useState(""),[S,_]=l.useState(!1),[E,b]=l.useState(""),[F,M]=l.useState(null),j=async a=>{if(a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!!x){_(!0),b("");try{const{data:p,error:u}=await o.from("user_profiles").select("id, email").eq("email",x.toLowerCase()).single();if(u&&u.code!=="PGRST116")throw u;M(p?"immediate":"pending"),h(2)}catch(p){console.error("Erreur vÃ©rification email:",p),b("Erreur lors de la vÃ©rification de l'email")}finally{_(!1)}}},y=async()=>{_(!0),b("");try{F==="immediate"?await k():await d(),h(3),setTimeout(()=>{w&&w()},2e3)}catch(a){console.error("Erreur transfert:",a),b(a.message||"Erreur lors du transfert")}finally{_(!1)}},k=async()=>{const{data:a,error:p}=await o.from("user_profiles").select("id").eq("email",x.toLowerCase()).single();if(p)throw p;const{error:u}=await o.from("dogs").update({user_id:a.id,professional_account_id:null,is_for_adoption:!1,adoption_status:"adopted",updated_at:new Date().toISOString()}).eq("id",n.id);if(u)throw u;const{error:D}=await o.from("notifications").insert({user_id:a.id,type:"dog_received",title:`ðŸŽ‰ ${n.name} a Ã©tÃ© transfÃ©rÃ© sur votre compte !`,message:`${n.name} a Ã©tÃ© transfÃ©rÃ© avec succÃ¨s. Vous pouvez maintenant gÃ©rer son profil de santÃ©.`,data:{dog_id:n.id,dog_name:n.name},created_at:new Date().toISOString()});D&&console.error("Erreur notification:",D)},d=async()=>{const p=(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,12).toUpperCase(),u=new Date;u.setDate(u.getDate()+7);const{data:D,error:C}=await o.from("pending_transfers").insert({dog_id:n.id,from_professional_account_id:N,to_email:x.toLowerCase(),transfer_token:p,status:"pending",dog_data:n,expires_at:u.toISOString(),created_at:new Date().toISOString()}).select().single();if(C)throw C;const{error:P}=await o.from("dogs").update({adoption_status:"pending_transfer",updated_at:new Date().toISOString()}).eq("id",n.id);if(P)throw P;const{error:T}=await o.functions.invoke("send-transfer-email",{body:{to_email:x.toLowerCase(),dog_name:n.name,dog_photo:n.photo_url,transfer_token:p,expires_days:7}});T&&console.error("Erreur envoi email:",T)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-3xl max-w-md w-full p-8 relative",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:e.jsx(R,{size:24})}),f===1&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl font-heading font-bold text-gray-900 mb-2",children:["TransfÃ©rer ",n.name]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Entrez l'adresse email de la personne qui adopte ",n.name]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de l'adoptant"}),e.jsx("input",{type:"email",value:x,onChange:a=>z(a.target.value),required:!0,placeholder:"exemple@email.com",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:a=>{a.key==="Enter"&&x&&(a.preventDefault(),j(a))}})]}),E&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 rounded-r text-sm text-red-700",children:E}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{type:"button",onClick:j,disabled:S||!x,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 disabled:opacity-50 flex items-center justify-center gap-2",children:S?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"animate-spin",size:20}),"VÃ©rification..."]}):e.jsx(e.Fragment,{children:"Continuer"})})]})]})]}),f===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"text-blue-600",size:32})}),e.jsx("h2",{className:"text-2xl font-heading font-bold text-gray-900 mb-2",children:"Confirmer le transfert"})]}),F==="immediate"?e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-r mb-6",children:e.jsxs("p",{className:"text-sm text-green-900",children:[e.jsx("strong",{children:"âœ“ Transfert immÃ©diat"}),e.jsx("br",{}),"L'utilisateur ",e.jsx("strong",{children:x})," possÃ¨de dÃ©jÃ  un compte. ",n.name," sera transfÃ©rÃ© immÃ©diatement sur son compte."]})}):e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r mb-6",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"ðŸ“§ Invitation par email"}),e.jsx("br",{}),"Un email sera envoyÃ© Ã  ",e.jsx("strong",{children:x})," avec un lien pour rÃ©cupÃ©rer ",n.name,". Le lien sera valide pendant 7 jours."]})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-6",children:[e.jsx("p",{className:"text-sm text-gray-700",children:e.jsx("strong",{children:"Ce qui sera transfÃ©rÃ© :"})}),e.jsxs("ul",{className:"text-sm text-gray-600 mt-2 space-y-1",children:[e.jsxs("li",{children:["â€¢ Toutes les informations de ",n.name]}),e.jsx("li",{children:"â€¢ Historique des vaccinations"}),e.jsx("li",{children:"â€¢ Dossier mÃ©dical complet"}),e.jsx("li",{children:"â€¢ Photos et documents"})]})]}),E&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 rounded-r text-sm text-red-700",children:E}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(1),disabled:S,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Retour"}),e.jsx("button",{onClick:y,disabled:S,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 disabled:opacity-50 flex items-center justify-center gap-2",children:S?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"animate-spin",size:20}),"Transfert..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{size:20}),"Confirmer"]})})]})]}),f===3&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ue,{className:"text-green-600",size:40})}),e.jsx("h2",{className:"text-2xl font-heading font-bold text-gray-900 mb-2",children:"Transfert rÃ©ussi !"}),F==="immediate"?e.jsxs("p",{className:"text-gray-600 mb-6",children:[n.name," a Ã©tÃ© transfÃ©rÃ© avec succÃ¨s sur le compte de ",e.jsx("strong",{children:x}),"."]}):e.jsxs("p",{className:"text-gray-600 mb-6",children:["Un email a Ã©tÃ© envoyÃ© Ã  ",e.jsx("strong",{children:x})," avec les instructions pour rÃ©cupÃ©rer ",n.name,"."]}),e.jsx("button",{onClick:i,className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600",children:"Fermer"})]})]})})},ze=({dog:n,professionalAccountId:N,onTransferComplete:i})=>{const[w,f]=l.useState(!1);return!n||!N||n.adoption_status==="adopted"?null:e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>f(!0),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4 rounded-2xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3 text-lg",children:[e.jsx(X,{size:24}),"TransfÃ©rer ce chien Ã  son adoptant"]}),w&&e.jsx(ke,{dog:n,professionalAccountId:N,onClose:()=>f(!1),onSuccess:()=>{f(!1),i&&i()}})]})},Fe=()=>{const{dogId:n}=me(),{user:N}=ce(),i=xe(),[w,f]=l.useState(!0),[h,x]=l.useState(null),[z,S]=l.useState([]),[_,E]=l.useState(""),[b,F]=l.useState("all"),[M,j]=l.useState(!1),[y,k]=l.useState(null),[d,a]=l.useState({name:"",breed:"",gender:"male",birth_date:"",size:"",weight:"",sterilized:!1,photo_url:"",adoption_story:"",adoption_requirements:"",adoption_fee:"",is_urgent:!1}),[p,u]=l.useState(!1),[D,C]=l.useState(0),[P,T]=l.useState(null),[H,Q]=l.useState(!1),[q,L]=l.useState([]),[A,U]=l.useState([]),[O,Y]=l.useState("");l.useEffect(()=>{N&&se()},[N]),l.useEffect(()=>{if(n&&z.length>0){const t=z.find(s=>s.id===n);t&&(k(t),a(t),T(t.photo_url),j(!0))}},[n,z]);const se=async()=>{try{const{data:t,error:s}=await o.from("professional_accounts").select("*").eq("user_id",N.id).single();if(s)throw s;x(t),$(t.id)}catch(t){console.error("Erreur:",t),i("/pro/register")}},$=async t=>{try{const{data:s,error:r}=await o.from("dogs").select("*").eq("professional_account_id",t).neq("adoption_status","adopted").order("created_at",{ascending:!1});if(r)throw r;S(s||[])}catch(s){console.error("Erreur chargement chiens:",s)}finally{f(!1)}},g=t=>{const{name:s,value:r,type:c,checked:I}=t.target;a(v=>({...v,[s]:c==="checkbox"?I:r}))},re=async t=>{var r;const s=(r=t.target.files)==null?void 0:r[0];if(s){if(!s.type.startsWith("image/")){alert("Veuillez sÃ©lectionner une image");return}if(s.size>5*1024*1024){alert("La photo ne doit pas dÃ©passer 5 MB");return}u(!0),C(0);try{const c=s.name.split(".").pop(),v=`dog-photos/${`${N.id}-${Date.now()}.${c}`}`,m=setInterval(()=>{C(J=>Math.min(J+10,90))},100),{data:Ee,error:ee}=await o.storage.from("dog-photos").upload(v,s,{cacheControl:"3600",upsert:!1});if(clearInterval(m),ee)throw ee;const{data:{publicUrl:te}}=o.storage.from("dog-photos").getPublicUrl(v);C(100),T(te),a(J=>({...J,photo_url:te})),setTimeout(()=>{C(0),u(!1)},500)}catch(c){console.error("Erreur upload:",c),alert("Erreur lors de l'upload de la photo"),u(!1),C(0)}}},ae=()=>{L([...q,{vaccine_name:"",vaccination_date:"",next_due_date:""}])},ne=t=>{L(q.filter((s,r)=>r!==t))},G=(t,s,r)=>{const c=[...q];c[t][s]=r,L(c)},le=()=>{U([...A,{product_name:"",treatment_type:"worm",treatment_date:"",next_due_date:""}])},oe=t=>{U(A.filter((s,r)=>r!==t))},B=(t,s,r)=>{const c=[...A];c[t][s]=r,U(c)},ie=async t=>{t.preventDefault(),f(!0);try{const s={...d,user_id:null,professional_account_id:h.id,is_for_adoption:!0,adoption_status:"available"};let r;if(y){const{error:c}=await o.from("dogs").update(s).eq("id",y.id);if(c)throw c;r=y.id}else{const{data:c,error:I}=await o.from("dogs").insert([s]).select().single();if(I)throw I;if(r=c.id,q.length>0){const v=q.filter(m=>m.vaccine_name&&m.vaccination_date).map(m=>({dog_id:r,vaccine_name:m.vaccine_name,vaccination_date:m.vaccination_date,next_due_date:m.next_due_date||null}));v.length>0&&await o.from("vaccinations").insert(v)}if(A.length>0){const v=A.filter(m=>m.product_name&&m.treatment_date).map(m=>({dog_id:r,product_name:m.product_name,treatment_type:m.treatment_type,treatment_date:m.treatment_date,next_due_date:m.next_due_date||null}));v.length>0&&await o.from("treatments").insert(v)}d.weight&&await o.from("weight_records").insert([{dog_id:r,weight:parseFloat(d.weight),measurement_date:new Date().toISOString().split("T")[0]}]),O&&await o.from("health_notes").insert([{dog_id:r,description:O,note_date:new Date().toISOString()}])}await $(h.id),j(!1),k(null),V()}catch(s){console.error("Erreur sauvegarde:",s),alert("Erreur lors de la sauvegarde")}finally{f(!1)}},de=async t=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce chien ?"))try{const{error:s}=await o.from("dogs").delete().eq("id",t);if(s)throw s;await $(h.id)}catch(s){console.error("Erreur suppression:",s),alert("Erreur lors de la suppression")}},V=()=>{a({name:"",breed:"",gender:"male",birth_date:"",size:"",weight:"",sterilized:!1,photo_url:"",adoption_story:"",adoption_requirements:"",adoption_fee:"",is_urgent:!1}),T(null),L([]),U([]),Y(""),Q(!1)},Z=z.filter(t=>{const s=t.name.toLowerCase().includes(_.toLowerCase())||t.breed.toLowerCase().includes(_.toLowerCase());let r=!0;return b==="all"?r=!0:b==="available"?r=!t.foster_family_contact_id&&t.adoption_status==="available":b==="foster"?r=!!t.foster_family_contact_id:b==="pending"&&(r=t.adoption_status==="pending"),s&&r});return w&&!h?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full"})}):M?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>{j(!1),k(null),V(),i("/pro/dogs")},className:"flex items-center gap-1 sm:gap-2 text-gray-600 hover:text-gray-900 min-h-[44px] min-w-[44px]",children:[e.jsx(R,{size:18,className:"sm:size-5"}),e.jsx("span",{className:"font-medium text-sm sm:text-base hidden xs:inline",children:"Annuler"})]}),e.jsx("h1",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900 truncate px-2",children:y?"Modifier":"Nouveau chien"}),e.jsx("div",{className:"w-10 sm:w-20"})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-3 sm:px-4 py-6 sm:py-8",children:e.jsxs("form",{onSubmit:ie,className:"bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Photo du chien"}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative w-40 h-40 sm:w-48 sm:h-48",children:[P?e.jsx("img",{src:P,alt:"AperÃ§u",className:"w-full h-full object-cover rounded-2xl shadow-lg"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 rounded-2xl flex items-center justify-center",children:e.jsx(pe,{size:48,className:"text-white opacity-50"})}),p&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-2xl flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"animate-spin h-8 w-8 text-white mx-auto mb-2"}),e.jsxs("p",{className:"text-white text-sm font-medium",children:[D,"%"]})]})})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:re,disabled:p,className:"hidden"}),e.jsxs("div",{className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2 min-h-[44px]",children:[e.jsx(he,{size:20}),P?"Changer la photo":"Choisir une photo"]})]}),p&&e.jsx("div",{className:"w-full max-w-xs",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${D}%`}})})}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"JPG, PNG ou GIF â€¢ Max 5 MB"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du chien *"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:g,required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Race *"}),e.jsx("input",{type:"text",name:"breed",value:d.breed,onChange:g,required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sexe *"}),e.jsxs("select",{name:"gender",value:d.gender,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base",children:[e.jsx("option",{value:"male",children:"MÃ¢le"}),e.jsx("option",{value:"female",children:"Femelle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de naissance"}),e.jsx("input",{type:"date",name:"birth_date",value:d.birth_date,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taille"}),e.jsx("input",{type:"text",name:"size",value:d.size,onChange:g,placeholder:"Ex: moyen",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poids (kg)"}),e.jsx("input",{type:"number",name:"weight",value:d.weight,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Son histoire *"}),e.jsx("textarea",{name:"adoption_story",value:d.adoption_story,onChange:g,required:!0,rows:3,placeholder:"Racontez l'histoire de ce chien...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conditions d'adoption"}),e.jsx("textarea",{name:"adoption_requirements",value:d.adoption_requirements,onChange:g,rows:2,placeholder:"Maison avec jardin, expÃ©rience avec les chiens...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frais d'adoption (â‚¬)"}),e.jsx("input",{type:"number",name:"adoption_fee",value:d.adoption_fee,onChange:g,placeholder:"150",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer min-h-[44px]",children:[e.jsx("input",{type:"checkbox",name:"sterilized",checked:d.sterilized,onChange:g,className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:"StÃ©rilisÃ©(e)"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer min-h-[44px]",children:[e.jsx("input",{type:"checkbox",name:"is_urgent",checked:d.is_urgent,onChange:g,className:"w-5 h-5 rounded border-gray-300 text-red-600 focus:ring-red-500 cursor-pointer"}),e.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:"Adoption urgente"})]})]}),!y&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("button",{type:"button",onClick:()=>Q(!H),className:"w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Informations de santÃ© (optionnel)"}),H?e.jsx(fe,{size:20}):e.jsx(ge,{size:20})]}),H&&e.jsxs("div",{className:"mt-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vaccinations"}),e.jsxs("button",{type:"button",onClick:ae,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[e.jsx(K,{size:16}),"Ajouter"]})]}),q.map((t,s)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",placeholder:"Nom du vaccin",value:t.vaccine_name,onChange:r=>G(s,"vaccine_name",r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm"}),e.jsx("input",{type:"date",value:t.vaccination_date,onChange:r=>G(s,"vaccination_date",r.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"}),e.jsx("input",{type:"date",placeholder:"Rappel",value:t.next_due_date,onChange:r=>G(s,"next_due_date",r.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>ne(s),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(R,{size:16})})]},s))]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Traitements"}),e.jsxs("button",{type:"button",onClick:le,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[e.jsx(K,{size:16}),"Ajouter"]})]}),A.map((t,s)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:t.treatment_type,onChange:r=>B(s,"treatment_type",r.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm",children:[e.jsx("option",{value:"worm",children:"Vermifuge"}),e.jsx("option",{value:"flea",children:"Anti-puces"})]}),e.jsx("input",{type:"text",placeholder:"Produit",value:t.product_name,onChange:r=>B(s,"product_name",r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm"}),e.jsx("input",{type:"date",value:t.treatment_date,onChange:r=>B(s,"treatment_date",r.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>oe(s),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(R,{size:16})})]},s))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes mÃ©dicales"}),e.jsx("textarea",{value:O,onChange:t=>Y(t.target.value),rows:3,placeholder:"Allergies, mÃ©dicaments, notes vÃ©tÃ©rinaires...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm"})]})]})]}),e.jsxs("div",{className:"flex flex-col xs:flex-row gap-3 sm:gap-4 pt-4 sm:pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{j(!1),k(null),V(),i("/pro/dogs")},className:"flex-1 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50 text-sm sm:text-base min-h-[44px]",children:"Annuler"}),e.jsxs("button",{type:"submit",disabled:w,className:"flex-1 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 disabled:opacity-50 flex items-center justify-center gap-2 text-sm sm:text-base min-h-[44px]",children:[e.jsx(be,{size:18,className:"sm:size-5"}),w?"Enregistrement...":"Enregistrer"]})]}),y&&y.adoption_status!=="adopted"&&e.jsx("div",{className:"pt-4 sm:pt-6 border-t border-gray-200 mt-4 sm:mt-6",children:e.jsx(ze,{dog:y,professionalAccountId:h==null?void 0:h.id,onTransferComplete:()=>{$(h.id),j(!1),k(null),V(),i("/pro/dogs")}})})]})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("button",{onClick:()=>i("/pro/dashboard"),className:"flex items-center gap-1 sm:gap-2 text-gray-600 hover:text-gray-900 min-h-[44px] min-w-[44px]",children:[e.jsx(je,{size:18,className:"sm:size-5"}),e.jsx("span",{className:"font-medium text-sm sm:text-base hidden xs:inline",children:"Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:()=>{j(!0),i("/pro/dogs/new")},className:"px-3 sm:px-4 py-2 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 flex items-center gap-1 sm:gap-2 min-h-[44px] text-sm sm:text-base",children:[e.jsx(K,{size:18,className:"sm:size-5"}),e.jsx("span",{className:"hidden xs:inline",children:"Ajouter un chien"}),e.jsx("span",{className:"xs:hidden",children:"Ajouter"})]}),e.jsx(Se,{})]})]}),e.jsxs("div",{className:"flex flex-col xs:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",value:_,onChange:t=>E(t.target.value),placeholder:"Rechercher un chien...",className:"w-full pl-9 sm:pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("select",{value:b,onChange:t=>F(t.target.value),className:"px-3 sm:px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base min-h-[44px]",children:[e.jsx("option",{value:"all",children:"Tous"}),e.jsx("option",{value:"available",children:"Disponibles"}),e.jsx("option",{value:"foster",children:"En FA"}),e.jsx("option",{value:"pending",children:"En cours d'adoption"})]})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-6",children:Z.length===0?e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-8 sm:p-12 text-center",children:[e.jsx(ve,{size:40,className:"text-gray-300 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Aucun chien trouvÃ©"}),e.jsx("button",{onClick:()=>j(!0),className:"px-4 sm:px-6 py-2 sm:py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 text-sm sm:text-base min-h-[44px]",children:"Ajouter votre premier chien"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Z.map(t=>{var s;return e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl overflow-hidden shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"aspect-square relative",children:[t.photo_url?e.jsx("img",{src:t.photo_url,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl sm:text-5xl md:text-6xl text-white font-bold",children:(s=t.name)==null?void 0:s.charAt(0).toUpperCase()})}),t.is_urgent&&e.jsx("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3",children:e.jsx("span",{className:"px-2 py-1 sm:px-3 sm:py-1 bg-red-500 text-white text-xs font-bold rounded-full",children:"URGENT"})}),e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3",children:e.jsxs("span",{className:`px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs font-bold flex items-center gap-1 ${t.foster_family_contact_id?"bg-purple-500 text-white":t.adoption_status==="pending"?"bg-orange-500 text-white":"bg-green-500 text-white"}`,children:[t.foster_family_contact_id&&e.jsx(Ne,{size:12}),t.foster_family_contact_id?"En FA":t.adoption_status==="pending"?"En cours":"Disponible"]})})]}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg md:text-xl text-gray-900 mb-1 truncate",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 truncate",children:t.breed}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>i(`/adoption/${t.id}`),className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm min-h-[44px]",children:[e.jsx(we,{size:14,className:"sm:size-4"}),e.jsx("span",{className:"truncate",children:"Voir"})]}),e.jsxs("button",{onClick:()=>i(`/pro/dogs/${t.id}`),className:"flex-1 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm min-h-[44px]",children:[e.jsx(_e,{size:14,className:"sm:size-4"}),e.jsx("span",{className:"truncate",children:"GÃ©rer"})]}),e.jsx("button",{onClick:()=>de(t.id),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 min-h-[44px] min-w-[44px] flex items-center justify-center",children:e.jsx(Ce,{size:14,className:"sm:size-4"})})]})]})]},t.id)})})})]})};export{Fe as default};
