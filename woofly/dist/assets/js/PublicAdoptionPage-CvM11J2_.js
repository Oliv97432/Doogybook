import{u as k,s as p,j as e}from"./index-B_5e2oWA.js";import{d as C,r as a}from"./vendor-react-DEK6ZklB.js";import{n as D,H as c,g as q,a3 as A,A as h,a4 as E}from"./vendor-ui-DjEwDNDD.js";import"./vendor-supabase-DfwcnzK-.js";const L=()=>{const t=C(),{user:o}=k(),[i,f]=a.useState([]),[l,g]=a.useState(0),[b,j]=a.useState(!0),[y,v]=a.useState(!1);a.useEffect(()=>{w()},[o]),a.useEffect(()=>{const r=()=>{v(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const N=()=>{window.scrollTo({top:0,behavior:"smooth"})},d=()=>{t(o?-1:"/")},w=async()=>{try{const{count:r}=await p.from("dogs").select("*",{count:"exact",head:!0}).eq("adoption_status","available").eq("is_published",!0).not("professional_account_id","is",null);g(r||0);const s=p.from("dogs").select(`
          id,
          name,
          breed,
          gender,
          birth_date,
          photo_url,
          is_urgent,
          adoption_fee,
          professional_account_id,
          professional_accounts!dogs_professional_account_id_fkey(
            organization_name
          )
        `).eq("adoption_status","available").eq("is_published",!0).not("professional_account_id","is",null).order("created_at",{ascending:!1});o||s.limit(6);const{data:n,error:m}=await s;if(m)throw m;const z=(n==null?void 0:n.map(x=>{var u;return{...x,organization_name:(u=x.professional_accounts)==null?void 0:u.organization_name}}))||[];f(z)}catch(r){console.error("Erreur chargement chiens publics:",r)}finally{j(!1)}},_=r=>r?new Date().getFullYear()-new Date(r).getFullYear():null;return b?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-16 w-16 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement des chiens Ã  adopter..."})]})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-card border-b border-border shadow-soft sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:d,className:"absolute left-0 top-1/2 -translate-y-1/2 flex items-center gap-2 px-4 py-2 text-foreground hover:text-primary transition-smooth group",children:[e.jsx(D,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Retour"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-heading font-bold text-foreground mb-2",children:"ðŸ  Chiens Ã  adopter"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base md:text-lg",children:"Donnez une seconde chance Ã  un compagnon fidÃ¨le"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary mb-2",children:[l," chiens recherchent une famille"]}),e.jsx("p",{className:"text-muted-foreground",children:"DÃ©couvrez nos compagnons et trouvez celui qui vous correspond"})]}),i.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(c,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:"Aucun chien disponible pour le moment"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Revenez bientÃ´t pour dÃ©couvrir de nouveaux compagnons Ã  adopter"}),e.jsx("button",{onClick:d,className:"px-6 py-3 bg-primary text-primary-foreground rounded-xl font-medium hover:bg-primary/90 transition-smooth",children:"Retour"})]}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.map(r=>{var s;return e.jsxs("div",{onClick:()=>t(`/adoption/${r.id}`),className:"group bg-card rounded-2xl overflow-hidden shadow-soft border border-border hover:shadow-lg transition-all duration-300 cursor-pointer hover:-translate-y-1",children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden bg-gradient-to-br from-primary/10 to-primary/5",children:[r.photo_url?e.jsx("img",{src:r.photo_url,alt:r.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-6xl font-bold text-primary/30",children:(s=r.name)==null?void 0:s.charAt(0).toUpperCase()})}),r.is_urgent&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg animate-pulse",children:"URGENT"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full shadow-lg backdrop-blur-sm",children:"Disponible"})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-heading font-bold text-xl text-foreground mb-1 group-hover:text-primary transition-colors",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:r.breed}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[r.gender&&e.jsx("span",{children:r.gender==="male"?"â™‚ï¸ MÃ¢le":"â™€ï¸ Femelle"}),r.birth_date&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(q,{size:12}),_(r.birth_date)," an(s)"]})]}),r.organization_name&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["ðŸ“ ",r.organization_name]}),r.adoption_fee&&e.jsx("div",{className:"bg-primary/10 rounded-lg p-2 mb-3",children:e.jsxs("p",{className:"text-sm font-medium text-primary",children:["Participation aux frais : ",r.adoption_fee,"â‚¬"]})}),e.jsxs("button",{onClick:n=>{n.stopPropagation(),t(`/adoption/${r.id}`)},className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-xl font-medium hover:bg-primary/90 transition-smooth flex items-center justify-center gap-2",children:[e.jsx(c,{size:16}),e.jsx("span",{children:"Voir le profil"})]})]})]},r.id)}),!o&&l>6&&e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-2xl border-2 border-dashed border-primary/30 p-8 flex flex-col items-center justify-center text-center hover:border-primary/50 transition-all duration-300",children:[e.jsx("div",{className:"w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(A,{size:40,className:"text-primary"})}),e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-2",children:["+",l-6," autres chiens"]}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"DÃ©couvrez les autres chiens Ã  l'adoption"}),e.jsxs("button",{onClick:()=>t("/register"),className:"px-6 py-3 bg-primary text-primary-foreground rounded-xl font-medium hover:bg-primary/90 transition-smooth flex items-center gap-2 shadow-lg",children:[e.jsx("span",{children:"CrÃ©er un compte gratuit"}),e.jsx(h,{size:20})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Inscription en 30 secondes â€¢ Gratuit"})]})]}),!o&&i.length>0&&e.jsxs("div",{className:"mt-16 bg-gradient-to-br from-primary/10 to-purple-100 rounded-3xl p-8 sm:p-12 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"PrÃªt Ã  adopter ?"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto",children:"CrÃ©ez votre compte gratuitement et accÃ©dez Ã  tous nos chiens disponibles. Trouvez votre compagnon idÃ©al en quelques clics !"}),e.jsxs("button",{onClick:()=>t("/register"),className:"px-8 py-4 bg-primary text-primary-foreground rounded-xl font-bold text-lg hover:bg-primary/90 transition-smooth inline-flex items-center gap-3 shadow-lg",children:[e.jsx(c,{size:24}),e.jsx("span",{children:"CrÃ©er mon compte"}),e.jsx(h,{size:24})]})]})]}),e.jsx("footer",{className:"bg-card border-t border-border mt-16 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center text-muted-foreground text-sm",children:e.jsx("p",{children:"Â© 2025 Woofly â€¢ Plateforme d'adoption responsable"})})}),y&&e.jsx("button",{onClick:N,className:"fixed bottom-8 right-8 z-50 w-14 h-14 bg-primary text-primary-foreground rounded-full shadow-2xl hover:bg-primary/90 transition-all duration-300 flex items-center justify-center hover:scale-110 animate-in fade-in slide-in-from-bottom-4","aria-label":"Retour en haut",children:e.jsx(E,{size:24})})]})};export{L as default};
