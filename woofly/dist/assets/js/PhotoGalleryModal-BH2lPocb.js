import{j as e,r as b,aa as F,ac as D,n as M,al as I,T as q}from"./vendor-react-CkOypKSt.js";import{I as g,u as U,s as L}from"./index-CmpvQ7zl.js";import{_ as B}from"./vendor-pdf-lazy-D4am8o_0.js";import{B as j}from"./Button-Cc6JY5v3.js";import{P as $}from"./PremiumModal-CZbcugw6.js";import{R,A as O,C as G,X,Y as W,T as V,a as H}from"./vendor-charts-lazy--zKUSaWP.js";import{I as N}from"./Input-lBQ8bs8G.js";const te=({vaccination:t,onEdit:m,onDelete:o})=>{const a=new Date(t.nextDate)>new Date,r=Math.ceil((new Date(t.nextDate)-new Date)/(1e3*60*60*24));return e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-border hover:shadow-soft transition-smooth",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${a?"bg-success/10":"bg-warning/10"}`,children:e.jsx(g,{name:"Syringe",size:20,color:a?"var(--color-success)":"var(--color-warning)"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:t==null?void 0:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:["DerniÃ¨re dose: ",t==null?void 0:t.lastDate]}),e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:["Prochaine dose: ",t==null?void 0:t.nextDate]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(t),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-smooth","aria-label":"Modifier la vaccination",children:e.jsx(g,{name:"Edit",size:16,color:"var(--color-muted-foreground)"})}),e.jsx("button",{onClick:()=>o(t==null?void 0:t.id),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-destructive/10 transition-smooth","aria-label":"Supprimer la vaccination",children:e.jsx(g,{name:"Trash2",size:16,color:"var(--color-destructive)"})})]})]}),a&&r<=30&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-warning/10 rounded-lg",children:[e.jsx(g,{name:"Bell",size:16,color:"var(--color-warning)"}),e.jsxs("span",{className:"text-sm text-warning-foreground font-caption",children:["Rappel dans ",r," jour",r>1?"s":""]})]})]})},se=({treatment:t,type:m,onEdit:o,onDelete:a})=>{const r=()=>{switch(m){case"vermifuge":return"Pill";case"flea":return"Bug";default:return"Activity"}},l=()=>{switch(m){case"vermifuge":return"var(--color-secondary)";case"flea":return"var(--color-accent)";default:return"var(--color-primary)"}},c=new Date(t.nextDate)>new Date,d=Math.ceil((new Date(t.nextDate)-new Date)/(1e3*60*60*24));return e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-border hover:shadow-soft transition-smooth",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(g,{name:r(),size:20,color:l()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:t==null?void 0:t.product}),e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:["DerniÃ¨re application: ",t==null?void 0:t.lastDate]}),e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:["Prochaine application: ",t==null?void 0:t.nextDate]}),(t==null?void 0:t.notes)&&e.jsxs("p",{className:"text-sm text-muted-foreground font-caption mt-2",children:["Note: ",t==null?void 0:t.notes]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>o(t),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-smooth","aria-label":"Modifier le traitement",children:e.jsx(g,{name:"Edit",size:16,color:"var(--color-muted-foreground)"})}),e.jsx("button",{onClick:()=>a(t==null?void 0:t.id),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-destructive/10 transition-smooth","aria-label":"Supprimer le traitement",children:e.jsx(g,{name:"Trash2",size:16,color:"var(--color-destructive)"})})]})]}),c&&d<=7&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-warning/10 rounded-lg",children:[e.jsx(g,{name:"Bell",size:16,color:"var(--color-warning)"}),e.jsxs("span",{className:"text-sm text-warning-foreground font-caption",children:["Ã€ faire dans ",d," jour",d>1?"s":""]})]})]})},ne=({data:t,onAddWeight:m})=>{const{user:o}=U(),[a,r]=b.useState(!1),[l,c]=b.useState(!1),[d,i]=b.useState(!1);b.useEffect(()=>{(async()=>{if(o!=null&&o.id)try{const{data:n}=await L.from("user_profiles").select("subscription_tier").eq("id",o.id).single();r(["premium","professional"].includes(n==null?void 0:n.subscription_tier))}catch(n){console.error("Erreur vÃ©rification premium:",n)}})()},[o==null?void 0:o.id]);const s=()=>{if(!t||t.length===0)return{current:0,initial:0,min:0,max:0,average:0,variation:0,trend:"stable"};const h=t.map(P=>P.weight),n=h[h.length-1],f=h[0],v=Math.min(...h),y=Math.max(...h),z=h.reduce((P,E)=>P+E,0)/h.length,_=n-f;let T="stable";if(t.length>=3){const P=h.slice(-3),E=P[P.length-1]-P[0];E>.5?T="hausse":E<-.5&&(T="baisse")}return{current:n,initial:f,min:v,max:y,average:z,variation:_,trend:T}},x=()=>{if(!t||t.length<2)return null;const h=s();if(t.length>=2){const n=(h.initial-h.current)/h.initial*100;if(n>10)return{type:"warning",message:`Perte de poids significative dÃ©tectÃ©e (${n.toFixed(1)}%). Consultez votre vÃ©tÃ©rinaire.`,icon:D,color:"text-orange-600"}}if(t.length>=2){const n=(h.current-h.initial)/h.initial*100;if(n>15)return{type:"warning",message:`Prise de poids importante dÃ©tectÃ©e (+${n.toFixed(1)}%). Surveillez l'alimentation.`,icon:D,color:"text-orange-600"}}return null},p=async()=>{if(!a){c(!0);return}i(!0);try{const h=document.getElementById("weight-chart-container");if(!h){alert("âŒ Erreur: Impossible de trouver le graphique");return}const n=(await B(()=>import("./vendor-pdf-lazy-D4am8o_0.js").then(v=>v.h),__vite__mapDeps([0,1,2]))).default;(await n(h,{backgroundColor:"#ffffff",scale:2})).toBlob(v=>{const y=URL.createObjectURL(v),z=document.createElement("a");z.href=y,z.download=`graphique-poids-${new Date().toISOString().split("T")[0]}.png`,z.click(),URL.revokeObjectURL(y),alert("âœ… Graphique exportÃ© avec succÃ¨s !")})}catch(h){console.error("Erreur export:",h),alert("âŒ Erreur lors de l'export du graphique")}finally{i(!1)}},u=s(),w=x(),k=({active:h,payload:n})=>{var f,v,y;return h&&n&&(n!=null&&n.length)?e.jsxs("div",{className:"bg-popover border border-border rounded-lg p-3 shadow-elevated",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground mb-1",children:(v=(f=n==null?void 0:n[0])==null?void 0:f.payload)==null?void 0:v.date}),e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:["Poids: ",(y=n==null?void 0:n[0])==null?void 0:y.value," kg"]})]}):null},A=()=>{switch(u.trend){case"hausse":return e.jsx(q,{size:20,className:"text-green-600"});case"baisse":return e.jsx(I,{size:20,className:"text-red-600"});default:return e.jsx(M,{size:20,className:"text-gray-600"})}},C=()=>{switch(u.trend){case"hausse":return"En hausse";case"baisse":return"En baisse";default:return"Stable"}},S=()=>{switch(u.trend){case"hausse":return"text-green-600";case"baisse":return"text-red-600";default:return"text-gray-600"}};return!t||t.length===0?e.jsxs("div",{className:"bg-card rounded-lg shadow-soft p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(g,{name:"TrendingUp",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground",children:"Ã‰volution du poids"}),e.jsx("p",{className:"text-sm text-muted-foreground font-caption",children:"Suivi sur les 6 derniers mois"})]})]})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{name:"TrendingUp",size:24,color:"var(--color-muted-foreground)"})}),e.jsx("p",{className:"text-muted-foreground font-caption text-sm mb-4",children:"Aucune pesÃ©e enregistrÃ©e"}),e.jsx(j,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:m,size:"sm",children:"Ajouter une pesÃ©e"})]})]}):e.jsxs("div",{className:"bg-card rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(g,{name:"TrendingUp",size:20,color:"#ffffff"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground",children:"Ã‰volution du poids"}),e.jsxs("p",{className:"text-sm text-muted-foreground font-caption",children:[t.length," pesÃ©e",t.length>1?"s":""," enregistrÃ©e",t.length>1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{className:"text-sm",children:"Export..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{size:16}),e.jsx("span",{className:"text-sm",children:"Exporter"}),!a&&e.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded text-xs font-bold",children:"ðŸ‘‘"})]})}),e.jsx(j,{variant:"outline",iconName:"Plus",iconPosition:"left",onClick:m,size:"sm",children:"Ajouter"})]})]}),w&&e.jsx("div",{className:"mb-6 p-4 bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(w.icon,{size:20,className:w.color}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-orange-900 dark:text-orange-100",children:"Alerte santÃ©"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 mt-1",children:w.message})]})]})}),e.jsx("div",{id:"weight-chart-container",className:"w-full h-80 bg-background/50 rounded-lg p-4","aria-label":"Graphique d'Ã©volution du poids",children:e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(O,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorWeight",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(G,{strokeDasharray:"3 3",stroke:"var(--color-border)",opacity:.5}),e.jsx(X,{dataKey:"date",stroke:"var(--color-muted-foreground)",style:{fontSize:"12px"},tick:{fill:"var(--color-muted-foreground)"}}),e.jsx(W,{stroke:"var(--color-muted-foreground)",style:{fontSize:"12px"},tick:{fill:"var(--color-muted-foreground)"},label:{value:"Poids (kg)",angle:-90,position:"insideLeft",style:{fill:"var(--color-muted-foreground)"}}}),e.jsx(V,{content:e.jsx(k,{})}),e.jsx(H,{type:"monotone",dataKey:"weight",stroke:"#3b82f6",strokeWidth:3,fill:"url(#colorWeight)",dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}})]})})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mb-1",children:"Poids actuel"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[u.current.toFixed(1)," kg"]})]}),e.jsxs("div",{className:`bg-gradient-to-br rounded-xl p-4 border ${u.variation>0?"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700":u.variation<0?"from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700":"from-gray-50 to-gray-100 dark:from-gray-800/20 dark:to-gray-700/20 border-gray-200 dark:border-gray-700"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${u.variation>0?"text-green-600 dark:text-green-400":u.variation<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:"Variation"}),e.jsxs("p",{className:`text-2xl font-bold ${u.variation>0?"text-green-900 dark:text-green-100":u.variation<0?"text-red-900 dark:text-red-100":"text-gray-900 dark:text-gray-100"}`,children:[u.variation>0?"+":"",u.variation.toFixed(1)," kg"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-700",children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-1",children:"Moyenne"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[u.average.toFixed(1)," kg"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 rounded-xl p-4 border border-amber-200 dark:border-amber-700",children:[e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium mb-1",children:"Tendance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[A(),e.jsx("p",{className:`text-lg font-bold ${S()}`,children:C()})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{className:"bg-background/80 rounded-lg p-3 border border-border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Poids minimum"}),e.jsxs("p",{className:"text-lg font-semibold text-foreground",children:[u.min.toFixed(1)," kg"]})]}),e.jsxs("div",{className:"bg-background/80 rounded-lg p-3 border border-border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Poids maximum"}),e.jsxs("p",{className:"text-lg font-semibold text-foreground",children:[u.max.toFixed(1)," kg"]})]})]}),e.jsx($,{isOpen:l,onClose:()=>c(!1),reason:"weight-export"})]})},ie=({notes:t,onSave:m})=>{const[o,a]=b.useState(!1),[r,l]=b.useState(t),c=()=>{m(r),a(!1)},d=()=>{l(t),a(!1)};return e.jsxs("div",{className:"bg-card rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(g,{name:"FileText",size:20,color:"var(--color-primary)"})}),e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground",children:"Informations mÃ©dicales"})]}),!o&&e.jsx(j,{variant:"outline",iconName:"Edit",iconPosition:"left",onClick:()=>a(!0),children:"Modifier"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(N,{label:"Allergies",type:"text",placeholder:"Ex: Poulet, pollen, acariens...",value:r==null?void 0:r.allergies,onChange:i=>{var s;return l({...r,allergies:(s=i==null?void 0:i.target)==null?void 0:s.value})},disabled:!o,description:"Listez toutes les allergies connues"})}),e.jsx("div",{children:e.jsx(N,{label:"MÃ©dicaments actuels",type:"text",placeholder:"Ex: Antibiotiques, anti-inflammatoires...",value:r==null?void 0:r.medications,onChange:i=>{var s;return l({...r,medications:(s=i==null?void 0:i.target)==null?void 0:s.value})},disabled:!o,description:"Traitements en cours"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Notes vÃ©tÃ©rinaires"}),e.jsx("textarea",{className:"w-full min-h-32 px-4 py-3 bg-background border border-input rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed resize-y",placeholder:"Ajoutez des notes importantes sur la santÃ© de votre chien...",value:r==null?void 0:r.veterinaryNotes,onChange:i=>{var s;return l({...r,veterinaryNotes:(s=i==null?void 0:i.target)==null?void 0:s.value})},disabled:!o}),e.jsx("p",{className:"text-sm text-muted-foreground font-caption mt-2",children:"Historique mÃ©dical, conditions chroniques, etc."})]}),e.jsx("div",{children:e.jsx(N,{label:"VÃ©tÃ©rinaire principal",type:"text",placeholder:"Nom du vÃ©tÃ©rinaire",value:r==null?void 0:r.veterinarian,onChange:i=>{var s;return l({...r,veterinarian:(s=i==null?void 0:i.target)==null?void 0:s.value})},disabled:!o})}),e.jsx("div",{children:e.jsx(N,{label:"TÃ©lÃ©phone vÃ©tÃ©rinaire",type:"tel",placeholder:"+33 1 23 45 67 89",value:r==null?void 0:r.veterinarianPhone,onChange:i=>{var s;return l({...r,veterinarianPhone:(s=i==null?void 0:i.target)==null?void 0:s.value})},disabled:!o})}),o&&e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(j,{variant:"default",iconName:"Check",iconPosition:"left",onClick:c,className:"flex-1",children:"Enregistrer"}),e.jsx(j,{variant:"outline",iconName:"X",iconPosition:"left",onClick:d,className:"flex-1",children:"Annuler"})]})]})]})},ae=({isOpen:t,onClose:m,onSave:o,editData:a})=>{const[r,l]=b.useState(a||{name:"",lastDate:"",nextDate:""}),c=d=>{d==null||d.preventDefault(),o(r),m()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-4",children:e.jsxs("div",{className:"bg-popover rounded-lg shadow-elevated w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-popover border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground",children:a?"Modifier la vaccination":"Ajouter une vaccination"}),e.jsx("button",{onClick:m,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-smooth","aria-label":"Fermer",children:e.jsx(g,{name:"X",size:20})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[e.jsx(N,{label:"Nom du vaccin",type:"text",placeholder:"Ex: Rage, DHPP, Leptospirose...",value:r==null?void 0:r.name,onChange:d=>{var i;return l({...r,name:(i=d==null?void 0:d.target)==null?void 0:i.value})},required:!0}),e.jsx(N,{label:"Date de la derniÃ¨re dose",type:"date",value:r==null?void 0:r.lastDate,onChange:d=>{var i;return l({...r,lastDate:(i=d==null?void 0:d.target)==null?void 0:i.value})},required:!0}),e.jsx(N,{label:"Date de la prochaine dose",type:"date",value:r==null?void 0:r.nextDate,onChange:d=>{var i;return l({...r,nextDate:(i=d==null?void 0:d.target)==null?void 0:i.value})},required:!0,description:"Un rappel sera envoyÃ© 30 jours avant"}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(j,{type:"submit",variant:"default",iconName:"Check",iconPosition:"left",className:"flex-1",children:"Enregistrer"}),e.jsx(j,{type:"button",variant:"outline",onClick:m,className:"flex-1",children:"Annuler"})]})]})]})}):null},le=({isOpen:t,onClose:m,onSave:o,editData:a,type:r})=>{const[l,c]=b.useState(a||{product:"",lastDate:"",nextDate:"",notes:""}),d=()=>r==="vermifuge"?a?"Modifier le vermifuge":"Ajouter un vermifuge":r==="flea"?a?"Modifier le traitement anti-puces":"Ajouter un traitement anti-puces":"Ajouter un traitement",i=s=>{s==null||s.preventDefault(),o(l),m()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-4",children:e.jsxs("div",{className:"bg-popover rounded-lg shadow-elevated w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-popover border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground",children:d()}),e.jsx("button",{onClick:m,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-smooth","aria-label":"Fermer",children:e.jsx(g,{name:"X",size:20})})]}),e.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[e.jsx(N,{label:"Nom du produit",type:"text",placeholder:"Ex: Milbemax, Frontline...",value:l==null?void 0:l.product,onChange:s=>{var x;return c({...l,product:(x=s==null?void 0:s.target)==null?void 0:x.value})},required:!0}),e.jsx(N,{label:"Date de la derniÃ¨re application",type:"date",value:l==null?void 0:l.lastDate,onChange:s=>{var x;return c({...l,lastDate:(x=s==null?void 0:s.target)==null?void 0:x.value})},required:!0}),e.jsx(N,{label:"Date de la prochaine application",type:"date",value:l==null?void 0:l.nextDate,onChange:s=>{var x;return c({...l,nextDate:(x=s==null?void 0:s.target)==null?void 0:x.value})},required:!0,description:"Un rappel sera envoyÃ© 7 jours avant"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Notes (optionnel)"}),e.jsx("textarea",{className:"w-full min-h-24 px-4 py-3 bg-background border border-input rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-y",placeholder:"Dosage, effets secondaires, etc.",value:l==null?void 0:l.notes,onChange:s=>{var x;return c({...l,notes:(x=s==null?void 0:s.target)==null?void 0:x.value})}})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(j,{type:"submit",variant:"default",iconName:"Check",iconPosition:"left",className:"flex-1",children:"Enregistrer"}),e.jsx(j,{type:"button",variant:"outline",onClick:m,className:"flex-1",children:"Annuler"})]})]})]})}):null},oe=({isOpen:t,onClose:m,onSave:o})=>{var c,d,i;const[a,r]=b.useState({weight:"",date:(i=(d=(c=new Date)==null?void 0:c.toISOString())==null?void 0:d.split("T"))==null?void 0:i[0]}),l=s=>{var x,p,u;s==null||s.preventDefault(),o(a),m(),r({weight:"",date:(u=(p=(x=new Date)==null?void 0:x.toISOString())==null?void 0:p.split("T"))==null?void 0:u[0]})};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-4",children:e.jsxs("div",{className:"bg-popover rounded-lg shadow-elevated w-full max-w-md",children:[e.jsxs("div",{className:"bg-popover border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-heading font-semibold text-foreground",children:"Ajouter une pesÃ©e"}),e.jsx("button",{onClick:m,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-smooth","aria-label":"Fermer",children:e.jsx(g,{name:"X",size:20})})]}),e.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[e.jsx(N,{label:"Poids (kg)",type:"number",step:"0.1",placeholder:"Ex: 25.5",value:a==null?void 0:a.weight,onChange:s=>{var x;return r({...a,weight:(x=s==null?void 0:s.target)==null?void 0:x.value})},required:!0,description:"Entrez le poids en kilogrammes"}),e.jsx(N,{label:"Date de la pesÃ©e",type:"date",value:a==null?void 0:a.date,onChange:s=>{var x;return r({...a,date:(x=s==null?void 0:s.target)==null?void 0:x.value})},required:!0}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(j,{type:"submit",variant:"default",iconName:"Check",iconPosition:"left",className:"flex-1",children:"Enregistrer"}),e.jsx(j,{type:"button",variant:"outline",onClick:m,className:"flex-1",children:"Annuler"})]})]})]})}):null},de=({isOpen:t,onClose:m,onSave:o,profile:a})=>{const[r,l]=b.useState({name:"",breed:"",gender:"",weight:"",sterilized:"",microchip_number:"",notes:""}),[c,d]=b.useState({});b.useEffect(()=>{a&&l({name:a.name||"",breed:a.breed||"",gender:a.gender||"",weight:a.weight||"",sterilized:a.sterilized||"",microchip_number:a.microchip_number||"",notes:a.notes||""})},[a]);const i=()=>{const p={};if(r.name.trim()||(p.name="Le nom est requis"),r.breed.trim()||(p.breed="La race est requise"),r.gender||(p.gender="Le sexe est requis"),r.weight&&(isNaN(parseFloat(r.weight))||parseFloat(r.weight)<=0)&&(p.weight="Le poids doit Ãªtre un nombre positif"),r.microchip_number){const u=r.microchip_number.trim(),w=/^\d{15}$/.test(u),k=/^[A-Z]{3}\d{3,4}$/i.test(u);!w&&!k&&(p.microchip_number="Format invalide. Puce: 15 chiffres. Tatouage: 3 lettres + 3-4 chiffres (ex: ABC123)")}return d(p),Object.keys(p).length===0},s=p=>{const{name:u,value:w}=p.target;l(k=>({...k,[u]:w})),c[u]&&d(k=>({...k,[u]:""}))},x=p=>{p.preventDefault(),i()&&o({...a,...r})};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-heading font-semibold text-foreground",children:"Modifier le profil"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-muted rounded-full transition-smooth",children:e.jsx(g,{name:"X",size:24})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Nom du chien ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:s,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Rex, Bella, Max..."}),c.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Race ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"breed",value:r.breed,onChange:s,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Labrador, Berger Allemand, CroisÃ©..."}),c.breed&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.breed})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Sexe ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"gender",value:r.gender,onChange:s,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"SÃ©lectionner"}),e.jsx("option",{value:"male",children:"MÃ¢le"}),e.jsx("option",{value:"female",children:"Femelle"})]}),c.gender&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Poids (kg)"}),e.jsx("input",{type:"number",step:"0.1",name:"weight",value:r.weight.toString().replace(" kg",""),onChange:s,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"15.5"}),c.weight&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.weight})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Statut"}),e.jsxs("select",{name:"sterilized",value:r.sterilized,onChange:s,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Non stÃ©rilisÃ©",children:"Non stÃ©rilisÃ©"}),e.jsx("option",{value:"StÃ©rilisÃ©",children:"StÃ©rilisÃ©"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"NumÃ©ro de puce Ã©lectronique ou tatouage"}),e.jsx("input",{type:"text",name:"microchip_number",value:r.microchip_number,onChange:s,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-mono",placeholder:"250268500123456 ou ABC1234",maxLength:"15"}),c.microchip_number&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.microchip_number}),e.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:[e.jsx(g,{name:"Info",size:12,className:"inline mr-1"}),"Puce: 15 chiffres â€¢ Tatouage: 3 lettres + 3-4 chiffres (ex: ABC123)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Notes"}),e.jsx("textarea",{name:"notes",value:r.notes,onChange:s,rows:4,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-none",placeholder:"Informations supplÃ©mentaires, particularitÃ©s..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:m,className:"flex-1",children:"Annuler"}),e.jsx(j,{type:"submit",variant:"default",className:"flex-1",children:"Enregistrer"})]})]})]})}):null},ce=({isOpen:t,onClose:m,photos:o,onAddPhoto:a,currentProfilePhotoUrl:r,onSetProfilePhoto:l})=>{const[c,d]=b.useState(!1),[i,s]=b.useState(null),[x,p]=b.useState({});if(!t)return null;const u=async n=>{var v;const f=(v=n.target.files)==null?void 0:v[0];if(!f){console.log("Aucun fichier sÃ©lectionnÃ©");return}console.log("Fichier sÃ©lectionnÃ©:",{name:f.name,type:f.type,size:f.size}),d(!0);try{await a(f),n.target.value=""}catch(y){console.error("Erreur upload:",y)}finally{d(!1)}},w=()=>{document.getElementById("photo-upload-input").click()},k=async n=>{l&&(await l(n),alert("âœ… Photo de profil mise Ã  jour !"))},A=n=>n===r,C=(n,f)=>n?n.includes("supabase")&&n.includes("storage")?`${n}?width=${f}&quality=80&format=webp`:n:"",S=n=>n?`
      ${C(n,400)} 400w,
      ${C(n,800)} 800w,
      ${C(n,1200)} 1200w
    `.trim():"",h=n=>{p(f=>({...f,[n]:!0}))};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50",children:[e.jsxs("div",{className:"bg-card rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-card border-b border-border p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-heading font-semibold text-foreground",children:"Galerie photos"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[(o==null?void 0:o.length)||0," photo",(o==null?void 0:o.length)>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:w,disabled:c,children:c?"Upload...":"Ajouter une photo"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-muted rounded-full transition-smooth",children:e.jsx(g,{name:"X",size:24})})]})]}),e.jsx("input",{id:"photo-upload-input",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:u,className:"hidden"}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:!o||o.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{name:"Image",size:40,color:"var(--color-muted-foreground)"})}),e.jsx("h3",{className:"text-lg font-heading font-semibold text-foreground mb-2",children:"Aucune photo dans la galerie"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ajoutez des photos de votre chien pour crÃ©er sa galerie"}),e.jsx(j,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:w,disabled:c,children:c?"Upload en cours...":"Ajouter une photo"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.map(n=>{const f=A(n.photo_url),v=x[n.id];return e.jsxs("div",{className:"group relative aspect-square rounded-lg overflow-hidden bg-muted cursor-pointer hover:shadow-lg transition-smooth",children:[v?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:e.jsx(g,{name:"ImageOff",size:40,color:"var(--color-muted-foreground)"})}):e.jsx("img",{src:C(n.photo_url,400),srcSet:S(n.photo_url),sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw",alt:n.caption||"Photo du chien",className:"w-full h-full object-cover",loading:"lazy",decoding:"async",width:"400",height:"400",onError:()=>h(n.id),onClick:()=>s(n)}),f&&e.jsxs("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 shadow-lg",children:[e.jsx(g,{name:"Star",size:12}),"Profil"]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-smooth",children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 space-y-2",children:[e.jsx("p",{className:"text-white text-xs",children:new Date(n.created_at).toLocaleDateString("fr-FR")}),!f&&e.jsxs("button",{onClick:y=>{y.stopPropagation(),k(n.photo_url)},className:"w-full bg-white/90 hover:bg-white text-foreground px-3 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-2 transition-smooth",children:[e.jsx(g,{name:"User",size:14}),"DÃ©finir comme photo de profil"]}),f&&e.jsxs("div",{className:"w-full bg-primary/90 text-primary-foreground px-3 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-2",children:[e.jsx(g,{name:"Check",size:14}),"Photo de profil actuelle"]})]})})]},n.id)})})}),e.jsx("div",{className:"border-t border-border p-4 bg-muted/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(g,{name:"Info",size:16}),e.jsx("span",{children:"Formats acceptÃ©s : JPG, PNG, WEBP â€¢ Taille max : 5 MB"})]})})]}),i&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4",onClick:()=>s(null),children:e.jsxs("div",{className:"max-w-4xl max-h-[90vh] relative",children:[e.jsx("button",{onClick:()=>s(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300",children:e.jsx(g,{name:"X",size:32})}),e.jsx("img",{src:C(i.photo_url,1200),srcSet:S(i.photo_url),sizes:"90vw",alt:i.caption||"Photo du chien",className:"max-w-full max-h-[90vh] object-contain rounded-lg",loading:"eager",decoding:"async"})]})})]})};export{ae as A,de as E,ie as H,ce as P,se as T,te as V,ne as W,le as a,oe as b};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/vendor-pdf-lazy-D4am8o_0.js","assets/js/vendor-misc-B8HVOz_X.js","assets/js/vendor-react-CkOypKSt.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}